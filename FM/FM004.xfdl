<?xml version="1.0" encoding="utf-8"?>
<FDL version="2.1">
  <Form id="FM004" width="1400" height="760" titletext="New Form" onload="FM004_onload" griduserproperty="colfix,rowfix,filter,initial,replace,colhide,export,import,personal">
    <Layouts>
      <Layout height="760" mobileorientation="landscape" width="1400">
        <Static id="Static00" taborder="0" left="0" top="0" cssclass="sta_WF_guideRed" visible="false" text="h10" height="10" right="1"/>
        <Static id="Static08" taborder="1" left="0" top="0" width="10" cssclass="sta_WF_guideRed" visible="false" bottom="10" text="w&#13;&#10;10"/>
        <Static id="Static01" taborder="2" top="0" width="10" cssclass="sta_WF_guideRed" visible="false" bottom="191" text="w&#13;&#10;10" right="0"/>
        <Div id="Div00" taborder="3" text="Div00" left="10" top="11" width="737" height="33">
          <Layouts>
            <Layout>
              <Static id="sta_21" taborder="0" left="99" top="0" height="29" cssclass="sta_WF_detailLine" width="586"/>
              <Static id="Static23" taborder="1" text="사전상담번호" left="0" top="0" width="100" cssclass="sta_WF_detailLabel" height="29"/>
              <Edit id="edt_soNo" taborder="2" left="104" top="4" width="146" height="21" readonly="true" enable="true"/>
              <Button id="btn_preno" taborder="3" left="250" top="4" width="21" height="21" cssclass="btn_WF_search" text="" onclick="Div00_btn_preno1_onclick"/>
              <Static id="Static23_00" taborder="4" text="상담내용 순번" left="275" top="0" width="100" cssclass="sta_WF_detailLabel" height="29"/>
              <Edit id="edt_soNo00" taborder="5" left="379" top="4" width="48" height="21" readonly="true" enable="true"/>
              <Static id="Static23_01" taborder="6" text="견적번호" left="431" top="0" width="100" cssclass="sta_WF_detailLabel" height="29"/>
              <Edit id="edt_soNo01" taborder="7" left="535" top="4" width="146" height="21" readonly="true" enable="true"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="Div06_00" taborder="4" top="45" width="573" maxwidth="613" minwidth="" left="10" height="129">
          <Layouts>
            <Layout>
              <Static id="sta_21_00_00_00_00_00" taborder="12" left="99" top="87" height="29" cssclass="sta_WF_detailLine" width="451"/>
              <Static id="sta_21_00_00_00" taborder="4" left="99" top="31" height="29" cssclass="sta_WF_detailLine" width="451"/>
              <Static id="sta_21_00_00_00_00" taborder="6" left="99" top="59" height="29" cssclass="sta_WF_detailLine" width="451"/>
              <Static id="Static12" taborder="3" text="고객정보" left="2" top="-2" width="97" height="30" cssclass="sta_WF_title"/>
              <Static id="Static23_00_00" taborder="0" text="성명" left="0" top="31" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
              <Edit id="edt_soNo00_00" taborder="1" left="104" top="63" width="167" height="21" readonly="true"/>
              <Static id="Static23_00_00_00" taborder="2" text="성별" left="275" top="31" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
              <Static id="Static23_00_00_00_00" taborder="5" text="나이" left="275" top="59" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
              <Static id="Static23_00_00_01_00_00" taborder="7" text="연락처" left="0" top="59" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
              <Edit id="edt_soNo00_00_01_00_00" taborder="8" left="104" top="35" width="167" height="21" readonly="true"/>
              <Combo id="cmb_age" taborder="9" left="379" top="63" width="166" height="21" text="선택" value="" index="-1" codecolumn="CODE" datacolumn="CODE_NAME" type="filterlike" autoselect="true" onsetfocus="Div00_cmb_hsCd_oneditclick" innerdataset="" readonly="true"/>
              <Static id="Static23_00_00_00_00_00" taborder="10" text="인지경로" left="0" top="87" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
              <Combo id="cmb_age00" taborder="11" left="104" top="91" width="166" height="21" text="선택" value="" index="-1" codecolumn="CODE" datacolumn="CODE_NAME" type="filterlike" autoselect="true" onsetfocus="Div00_cmb_hsCd_oneditclick" innerdataset="" readonly="true"/>
              <Static id="Static23_00_00_01_00_00_00" taborder="13" text="이메일" left="275" top="87" width="100" cssclass="sta_WF_detailLabel" height="29"/>
              <Edit id="edt_soNo00_00_00" taborder="14" left="379" top="91" width="167" height="21" readonly="true"/>
              <Combo id="cmb_age01" taborder="15" left="379" top="35" width="166" height="21" text="선택" value="" index="-1" codecolumn="CODE" datacolumn="CODE_NAME" type="filterlike" autoselect="true" onsetfocus="Div00_cmb_hsCd_oneditclick" readonly="true"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="Div06" taborder="5" top="45" width="550" maxwidth="613" minwidth="" left="603" height="182">
          <Layouts>
            <Layout>
              <Static id="sta_21_00_00_00_00_00_00" taborder="11" left="99" top="143" height="29" cssclass="sta_WF_detailLine" width="451"/>
              <Static id="sta_21_00_00_00" taborder="3" left="99" top="31" height="29" cssclass="sta_WF_detailLine" width="451"/>
              <Static id="sta_21_00_00_00_00" taborder="5" left="99" top="59" height="29" cssclass="sta_WF_detailLine" width="451"/>
              <Static id="sta_21_00_00_00_00_00" taborder="8" left="99" top="115" height="29" cssclass="sta_WF_detailLine" width="451"/>
              <Static id="Static12" taborder="2" text="대상자정보" left="4" top="-2" width="97" height="30" cssclass="sta_WF_title"/>
              <Static id="Static23_00_00" taborder="0" text="성명" left="0" top="31" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
              <Static id="Static23_00_00_00" taborder="1" text="성별" left="275" top="31" width="100" cssclass="sta_WF_detailLabel" height="29"/>
              <Static id="Static23_00_00_00_00" taborder="4" text="나이" left="275" top="59" width="100" cssclass="sta_WF_detailLabel" height="29"/>
              <Static id="Static23_00_00_00_00_00" taborder="6" text="현재지역(주소)" left="0" top="115" width="100" cssclass="sta_WF_detailLabel" height="29"/>
              <Edit id="edt_soNo00_00_00_00_00" taborder="7" left="104" top="119" width="440" height="21" readonly="true"/>
              <Static id="Static23_00_00_01_00_00" taborder="9" text="관계" left="0" top="59" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
              <Edit id="edt_soNo00_00_01_00_00" taborder="10" left="104" top="35" width="166" height="21" readonly="true"/>
              <Static id="sta_21_00_00_00_00_01" taborder="12" left="99" top="87" height="29" cssclass="sta_WF_detailLine" width="451"/>
              <Edit id="edt_soNo00_00_01" taborder="13" left="104" top="91" width="167" height="21" readonly="true"/>
              <Static id="Static23_00_00_00_00_01" taborder="14" text="현재거주시설" left="275" top="87" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
              <Static id="Static23_00_00_01_00_00_00" taborder="15" text="주민등록지" left="0" top="87" width="100" cssclass="sta_WF_detailLabel" height="29"/>
              <Static id="Static23_00_00_00_00_00_00" taborder="16" text="정부지원" left="0" top="143" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
              <Static id="Static23_00_00_00_00_01_00" taborder="17" text="현재상황" left="275" top="143" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
              <Combo id="cmb_curCondition" taborder="18" left="379" top="147" width="166" height="21" text="선택" value="" index="-1" codecolumn="CODE" datacolumn="CODE_NAME" type="filterlike" autoselect="true" onsetfocus="Div00_cmb_hsCd_oneditclick" readonly="true"/>
              <Combo id="cmb_age" taborder="19" left="379" top="63" width="166" height="21" text="선택" value="" index="-1" codecolumn="CODE" datacolumn="CODE_NAME" type="filterlike" autoselect="true" onsetfocus="Div00_cmb_hsCd_oneditclick" readonly="true"/>
              <Combo id="cmb_age00" taborder="20" left="379" top="91" width="166" height="21" text="선택" value="" index="-1" codecolumn="CODE" datacolumn="CODE_NAME" type="filterlike" autoselect="true" onsetfocus="Div00_cmb_hsCd_oneditclick" readonly="true"/>
              <Combo id="cmb_age00_00" taborder="21" left="104" top="147" width="166" height="21" text="선택" value="" index="-1" codecolumn="CODE" datacolumn="CODE_NAME" type="filterlike" autoselect="true" onsetfocus="Div00_cmb_hsCd_oneditclick" readonly="true"/>
              <Combo id="cmb_age01" taborder="22" left="104" top="63" width="167" height="21" text="선택" value="" index="-1" codecolumn="CODE" datacolumn="CODE_NAME" type="filterlike" autoselect="true" onsetfocus="Div00_cmb_hsCd_oneditclick" innerdataset="ds_rel" readonly="true"/>
              <Combo id="cmb_age01_00" taborder="23" left="379" top="35" width="166" height="21" text="선택" value="" index="-1" codecolumn="CODE" datacolumn="CODE_NAME" type="filterlike" autoselect="true" onsetfocus="Div00_cmb_hsCd_oneditclick" readonly="true"/>
            </Layout>
          </Layouts>
        </Div>
        <Tab id="Tab00" taborder="6" tabindex="0" left="10" top="256" height="500" right="10">
          <Tabpages>
            <Tabpage id="Tabpage1" text="안심견적 1">
              <Layouts>
                <Layout>
                  <Div id="Div00" taborder="0" text="Div00" left="0" top="4" width="313" height="464">
                    <Layouts>
                      <Layout>
                        <Static id="sta_21_00_00_00_00" taborder="27" left="99" top="402" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21_00_00_00" taborder="22" left="99" top="374" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21_00_00" taborder="18" left="99" top="281" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21_00_00_00_00_00_00" taborder="12" left="99" top="192" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21_00_00_00_00_00" taborder="10" left="99" top="164" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21_00" taborder="6" left="99" top="136" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21" taborder="2" left="99" top="46" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="Static00_00" taborder="1" text="1. 상품선택" left="-1" top="12" width="80" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static23" taborder="0" text="상품" left="0" top="46" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Static id="Static00_00_00" taborder="3" text="3. 장례식장 선택" left="-1" top="102" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static23_00" taborder="4" text="장례식장" left="0" top="136" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Button id="btn_preno00" taborder="7" top="140" height="21" cssclass="btn_WF_search" text="" onclick="Div06_btn_sono00_00_onclick" width="21" right="10"/>
                        <Edit id="edt_soNo00" taborder="5" left="104" top="140" height="21" readonly="true" enable="true" right="btn_preno00:0"/>
                        <Static id="Static23_00_00_00_00_00" taborder="8" text="빈소 사용료" left="0" top="164" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Combo id="cmb_age00" taborder="9" top="168" height="21" text="선택" value="" index="-1" codecolumn="FN_SEQ" datacolumn="PLACE_NM" type="filterlike" autoselect="true" onsetfocus="Div00_cmb_hsCd_oneditclick" innerdataset="ds_place" right="31" left="104" onitemchanged="Tab00_Tabpage1_Div00_cmb_age00_onitemchanged" readonly="true"/>
                        <Static id="Static23_00_00_00_00_00_00" taborder="11" text="제물비" left="0" top="192" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Div id="div_mCombo8" taborder="13" text="Div00" left="104" top="196" height="23" url="Comm::Comm_MultiCombo.xfdl" combocodecolumn="ITEM_CD" combodatacolumn="ITEM_NM" comboinnerdataset="ds_fa_item" callbackfunc="fn_mComboCallback" right="10"/>
                        <Static id="Static00_00_00_00" taborder="14" text="4. 화장장 선택" left="-1" top="247" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static23_00_00" taborder="15" text="화장장" left="0" top="281" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Button id="btn_preno00_00" taborder="17" top="285" height="21" cssclass="btn_WF_search" text="" width="21" right="10" onclick="Tab00_Tabpage1_Div00_btn_preno00_00_onclick"/>
                        <Edit id="edt_soNo00_00" taborder="16" left="104" top="285" height="21" readonly="true" enable="true" right="btn_preno00_00:0"/>
                        <Static id="Static00_00_00_00_00" taborder="19" text="5. 장지 선택" left="-1" top="340" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static23_00_00_00" taborder="20" text="장지" left="0" top="374" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Button id="btn_preno00_00_00" taborder="23" top="378" height="21" cssclass="btn_WF_search" text="" right="10" width="21" onclick="Tab00_Tabpage1_Div00_btn_preno00_00_00_onclick"/>
                        <Edit id="edt_soNo00_00_00" taborder="21" height="21" readonly="true" enable="true" right="btn_preno00_00_00:0" top="378" left="104"/>
                        <Combo id="cmb_item" taborder="24" left="104" top="50" width="199" height="21" text="선택" value="" index="-1" codecolumn="GOODS_NO" datacolumn="GOODS_NM" type="filterlike" autoselect="true" innerdataset="ds_item" onitemchanged="Tab00_Tabpage1_Div00_cmb_item_onitemchanged"/>
                        <Button id="btn_preno00_01" taborder="25" top="168" height="21" cssclass="btn_WF_search" text="" width="21" right="10" onclick="Div00_btn_preno_onclick"/>
                        <Static id="Static23_00_00_00_00" taborder="26" text="구분" left="0" top="402" width="100" cssclass="sta_WF_detailLabel" height="29"/>
                        <Combo id="cmb_age00_00" taborder="28" top="406" height="21" text="선택" value="" index="-1" codecolumn="CODE" datacolumn="CODE_NAME" type="filterlike" autoselect="true" onsetfocus="Div00_cmb_hsCd_oneditclick" right="31" left="104" onitemchanged="Tab00_Tabpage1_Div00_cmb_age00_00_onitemchanged" readonly="true"/>
                      </Layout>
                    </Layouts>
                  </Div>
                  <Div id="Div01" taborder="1" text="Div01" left="333" top="15" height="298" width="535">
                    <Layouts>
                      <Layout>
                        <Static id="Static00_00" taborder="0" text="2. 추가 / 공제상품 선택" left="-1" top="-6" width="135" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static12" taborder="1" text="상품 선택 내역" left="0" top="23" width="97" height="21" cssclass="sta_WF_title"/>
                        <Grid id="Grid01_00_00_00" taborder="2" left="0" top="50" autofittype="col" oncellclick="Grid01_00_oncellclick" bottom="0" autoenter="select" right="2" binddataset="ds_list_2">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="37"/>
                                <Column size="37"/>
                                <Column size="72"/>
                                <Column size="73"/>
                                <Column size="161"/>
                                <Column size="44"/>
                                <Column size="80"/>
                                <Column size="80"/>
                              </Columns>
                              <Rows>
                                <Row size="36" band="head"/>
                                <Row size="24"/>
                                <Row size="24" band="summ"/>
                              </Rows>
                              <Band id="head">
                                <Cell text="순번"/>
                                <Cell col="1" text="공제"/>
                                <Cell col="2" text="추가/공제"/>
                                <Cell col="3" text="품목코드"/>
                                <Cell col="4" text="품명"/>
                                <Cell col="5" text="수량"/>
                                <Cell col="6" text="단가"/>
                                <Cell col="7" text="금액"/>
                              </Band>
                              <Band id="body">
                                <Cell text="expr:currow + 1" textAlign="center"/>
                                <Cell col="1" text="bind:DDT_FLG" textAlign="center" displaytype="checkboxcontrol"/>
                                <Cell col="2" text="bind:ADD_DEL_YN" textAlign="center" displaytype="expr:ADD_DEL_YN=='추가' ? 'buttoncontrol' : 'nomal'" edittype="expr:ADD_DEL_YN=='추가' ? 'button' : 'none'"/>
                                <Cell col="3" text="bind:ITEM_CD" textAlign="center" combodataset="ds_item" combocodecol="CODE" combodatacol="CODE_NAME" combotype="filterlike"/>
                                <Cell col="4" text="bind:ITEM_NM" textAlign="left" combodataset="ds_item" combocodecol="CODE" combodatacol="CODE_NAME" combotype="filterlike"/>
                                <Cell col="5" text="bind:QTY" textAlign="center" maskeditformat="##,##0" edittype="mask"/>
                                <Cell col="6" text="bind:PRICE" textAlign="right" maskeditformat="##,##0"/>
                                <Cell col="7" text="bind:TOTAL_PRICE" textAlign="right" maskeditformat="##,##0"/>
                              </Band>
                              <Band id="summary">
                                <Cell colspan="7" text="합   계 : " textAlign="right"/>
                                <Cell col="7" text="expr:comp.parent.parent.parent.parent.parent.parent.fn_sumPrice()" displaytype="mask" textAlign="right" maskeditformat="##,###"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                        <Button id="btn_add" taborder="3" left="386" top="21" height="21" text="추가" cssclass="btn_WF_main1" onclick="Tab00_Tabpage1_btn_add_onclick" width="45"/>
                        <Button id="btn_del" taborder="4" left="436" top="21" height="21" text="공제" cssclass="btn_WF_main1" onclick="Div00_btn_del_onclick" width="45"/>
                        <Button id="btn_del00" taborder="5" left="486" top="21" height="21" text="표준" cssclass="btn_WF_main1" width="45" onclick="Tab00_Tabpage1_Div01_btn_del00_onclick"/>
                      </Layout>
                    </Layouts>
                  </Div>
                  <Div id="Div01_00" taborder="2" text="Div01" left="880" top="15" width="500" height="298">
                    <Layouts>
                      <Layout>
                        <Static id="Static12" taborder="0" text="장지 선택 내역" left="0" top="23" width="97" height="21" cssclass="sta_WF_title"/>
                        <Grid id="Grid01_00_00_00" taborder="1" left="1" top="50" autofittype="col" oncellclick="Grid01_00_oncellclick" bottom="0" autoenter="select" right="0" binddataset="ds_list_3">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="37"/>
                                <Column size="76"/>
                                <Column size="191"/>
                                <Column size="36"/>
                                <Column size="80"/>
                                <Column size="80"/>
                              </Columns>
                              <Rows>
                                <Row size="36" band="head"/>
                                <Row size="24"/>
                                <Row size="24" band="summ"/>
                              </Rows>
                              <Band id="head">
                                <Cell text="순번"/>
                                <Cell col="1" text="장지시설"/>
                                <Cell col="2" text="품명"/>
                                <Cell col="3" text="수량"/>
                                <Cell col="4" text="단가"/>
                                <Cell col="5" text="금액"/>
                              </Band>
                              <Band id="body">
                                <Cell text="expr:currow + 1" textAlign="center"/>
                                <Cell col="1" text="bind:DIV" textAlign="center" combodataset="ds_item" combocodecol="CODE" combodatacol="CODE_NAME" combotype="filterlike"/>
                                <Cell col="2" text="bind:ITEM_NM" textAlign="left" combodataset="ds_item" combocodecol="CODE" combodatacol="CODE_NAME" combotype="filterlike"/>
                                <Cell col="3" text="bind:QTY" textAlign="center" maskeditformat="##,##0" edittype="mask"/>
                                <Cell col="4" text="bind:PRICE" textAlign="right" maskeditformat="##,##0"/>
                                <Cell col="5" text="bind:TOTAL_PRICE" textAlign="right" maskeditformat="##,##0"/>
                              </Band>
                              <Band id="summary">
                                <Cell colspan="5" text="합   계 : " textAlign="right"/>
                                <Cell col="5" text="expr:dataset.getSum(&quot;TOTAL_PRICE&quot;)" displaytype="mask" textAlign="right" maskeditformat="##,###"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                      </Layout>
                    </Layouts>
                  </Div>
                  <Div id="Div02" taborder="3" text="Div02" left="334" top="320" width="1046" height="146">
                    <Layouts>
                      <Layout>
                        <Static id="Static12" taborder="0" text="종합 내역" left="7" top="1" width="97" height="30" cssclass="sta_WF_title"/>
                        <Static id="Static00_00_00" taborder="1" text="■ 서비스명 : " left="9" top="32" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00" taborder="2" text="■ 서비스금액 : " left="9" top="57" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_00" taborder="3" text="- 공제내역 : " left="24" top="82" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_00_00" taborder="4" text="- 추가내역 : " left="24" top="107" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_01" taborder="5" text="■ 장례식장명 : " left="239" top="32" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_01" taborder="6" text="■ 장례식장 시설 사용료 : " left="609" top="32" width="154" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_01_00" taborder="7" text="■ 화장장명 : " left="239" top="58" width="80" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_01_00" taborder="8" text="■ 장지명 : " left="239" top="83" width="80" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_01_00_00" taborder="9" text="■ 총 예상 금액 : " left="609" top="107" width="147" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;" background="#fafdc8"/>
                        <Static id="S_item" taborder="10" left="103" top="33" width="88" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_F_NM" taborder="11" left="330" top="33" width="230" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_CREM_NM" taborder="12" left="330" top="60" width="230" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_J_NM" taborder="13" left="330" top="84" width="230" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_F_COST" taborder="14" left="756" top="36" width="130" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;" textAlign="right"/>
                        <Static id="S_ITEM_COST" taborder="15" left="103" top="60" width="88" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;" textAlign="right"/>
                        <Static id="S_ITEM_DEL" taborder="16" left="103" top="87" width="88" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;" textAlign="right"/>
                        <Static id="S_ITEM_ADD" taborder="17" left="103" top="110" width="88" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;" textAlign="right"/>
                        <Static id="S_TOT_COST" taborder="18" left="756" top="107" width="130" height="25" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;" background="#fafdc8" textAlign="right"/>
                        <Static id="Static00_00_00_00_01_01" taborder="19" text="■ 화장장 시설 사용료 : " left="609" top="58" width="154" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_01_01_00" taborder="20" text="■ 장지 시설 사용료 : " left="609" top="83" width="154" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_C_COST" taborder="21" left="756" top="61" width="130" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;" textAlign="right"/>
                        <Static id="S_B_COST" taborder="22" left="756" top="82" width="130" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;" textAlign="right"/>
                      </Layout>
                    </Layouts>
                  </Div>
                  <Button id="btn_mms" taborder="4" left="1230" top="4" height="21" text="문자 발송" cssclass="btn_WF_main1" width="70" onclick="Tab00_Tabpage1_btn_mms_onclick"/>
                  <Button id="btn_add00" taborder="5" left="1310" top="4" height="21" text="저장" cssclass="btn_WF_main1" onclick="fn_save" width="70"/>
                  <Button id="btn_mms00" taborder="6" left="1150" top="4" height="21" text="문자 조회" cssclass="btn_WF_main1" width="70" onclick="Tab00_Tabpage1_btn_mms00_onclick"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="Tabpage2" text="안심견적 2">
              <Layouts>
                <Layout>
                  <Div id="Div00" taborder="0" text="Div00" left="0" top="4" width="313" height="464">
                    <Layouts>
                      <Layout>
                        <Static id="sta_21_00_00_00_00" taborder="27" left="99" top="402" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21_00_00_00" taborder="22" left="99" top="374" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21_00_00" taborder="18" left="99" top="281" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21_00_00_00_00_00_00" taborder="12" left="99" top="192" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21_00_00_00_00_00" taborder="10" left="99" top="164" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21_00" taborder="6" left="99" top="136" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21" taborder="2" left="99" top="46" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="Static00_00" taborder="1" text="1. 상품선택" left="-1" top="12" width="80" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static23" taborder="0" text="상품" left="0" top="46" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Static id="Static00_00_00" taborder="3" text="3. 장례식장 선택" left="-1" top="102" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static23_00" taborder="4" text="장례식장" left="0" top="136" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Button id="btn_preno00" taborder="7" top="140" height="21" cssclass="btn_WF_search" text="" width="21" right="10"/>
                        <Edit id="edt_soNo00" taborder="5" left="104" top="140" height="21" readonly="true" enable="true" right="btn_preno00:0"/>
                        <Static id="Static23_00_00_00_00_00" taborder="8" text="빈소 사용료" left="0" top="164" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Combo id="cmb_age00" taborder="9" top="168" height="21" text="선택" value="" index="-1" codecolumn="FN_SEQ" datacolumn="PLACE_NM" type="filterlike" autoselect="true" onsetfocus="Div00_cmb_hsCd_oneditclick" innerdataset="ds_place" right="31" left="104" onitemchanged="Tab00_Tabpage1_Div00_cmb_age00_onitemchanged"/>
                        <Static id="Static23_00_00_00_00_00_00" taborder="11" text="제물비" left="0" top="192" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Div id="div_mCombo8" taborder="13" text="Div00" left="104" top="196" height="23" url="Comm::Comm_MultiCombo.xfdl" combocodecolumn="ITEM_CD" combodatacolumn="ITEM_NM" comboinnerdataset="ds_fa_item" callbackfunc="fn_mComboCallback" right="10"/>
                        <Static id="Static00_00_00_00" taborder="14" text="4. 화장장 선택" left="-1" top="247" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static23_00_00" taborder="15" text="화장장" left="0" top="281" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Button id="btn_preno00_00" taborder="17" top="285" height="21" cssclass="btn_WF_search" text="" width="21" right="10"/>
                        <Edit id="edt_soNo00_00" taborder="16" left="104" top="285" height="21" readonly="true" enable="true" right="btn_preno00_00:0"/>
                        <Static id="Static00_00_00_00_00" taborder="19" text="5. 장지 선택" left="-1" top="340" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static23_00_00_00" taborder="20" text="장지" left="0" top="374" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Button id="btn_preno00_00_00" taborder="23" top="378" height="21" cssclass="btn_WF_search" text="" right="10" width="21"/>
                        <Edit id="edt_soNo00_00_00" taborder="21" height="21" readonly="true" enable="true" right="btn_preno00_00_00:0" top="378" left="104"/>
                        <Combo id="cmb_item" taborder="24" left="104" top="50" width="199" height="21" text="선택" value="" index="-1" codecolumn="GOODS_NO" datacolumn="GOODS_NM" type="filterlike" autoselect="true" innerdataset="ds_item" onitemchanged="Tab00_Tabpage1_Div00_cmb_item_onitemchanged"/>
                        <Button id="btn_preno00_01" taborder="25" top="168" height="21" cssclass="btn_WF_search" text="" width="21" right="10"/>
                        <Static id="Static23_00_00_00_00" taborder="26" text="구분" left="0" top="402" width="100" cssclass="sta_WF_detailLabel" height="29"/>
                        <Combo id="cmb_age00_00" taborder="28" top="406" height="21" text="선택" value="" index="-1" codecolumn="CODE" datacolumn="CODE_NAME" type="filterlike" autoselect="true" onsetfocus="Div00_cmb_hsCd_oneditclick" right="31" left="104" readonly="true"/>
                      </Layout>
                    </Layouts>
                  </Div>
                  <Div id="Div01" taborder="1" text="Div01" left="333" top="15" height="298" width="535">
                    <Layouts>
                      <Layout>
                        <Static id="Static00_00" taborder="0" text="2. 추가 / 공제상품 선택" left="-1" top="-6" width="135" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static12" taborder="1" text="상품 선택 내역" left="0" top="23" width="97" height="21" cssclass="sta_WF_title"/>
                        <Grid id="Grid01_00_00_00" taborder="2" left="0" top="50" autofittype="col" oncellclick="Grid01_00_oncellclick" bottom="0" autoenter="select" right="2" binddataset="ds_list_4">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="37"/>
                                <Column size="60"/>
                                <Column size="73"/>
                                <Column size="134"/>
                                <Column size="35"/>
                                <Column size="44"/>
                                <Column size="81"/>
                                <Column size="81"/>
                              </Columns>
                              <Rows>
                                <Row size="36" band="head"/>
                                <Row size="24"/>
                                <Row size="24" band="summ"/>
                              </Rows>
                              <Band id="head">
                                <Cell text="순번"/>
                                <Cell col="1" text="추가/공제"/>
                                <Cell col="2" text="품목코드"/>
                                <Cell col="3" colspan="2" text="품명"/>
                                <Cell col="5" text="수량"/>
                                <Cell col="6" text="단가"/>
                                <Cell col="7" text="금액"/>
                              </Band>
                              <Band id="body">
                                <Cell text="expr:currow + 1" textAlign="center"/>
                                <Cell col="1" text="bind:ADD_DEL_YN" textAlign="center"/>
                                <Cell col="2" text="bind:ITEM_CD" textAlign="center" combodataset="ds_item" combocodecol="CODE" combodatacol="CODE_NAME" combotype="filterlike"/>
                                <Cell col="3" text="bind:ITEM_NM" textAlign="left" combodataset="ds_item" combocodecol="CODE" combodatacol="CODE_NAME" combotype="filterlike"/>
                                <Cell col="4" textAlign="center" maskeditformat="##,##0" edittype="expr:ADD_DEL_YN=='추가' ? 'button' : ''" text="expr:ADD_DEL_YN=='추가' ? '찾기' : ''" displaytype="expr:ADD_DEL_YN=='추가' ? 'buttoncontrol' : ''"/>
                                <Cell col="5" text="bind:QTY" textAlign="center" maskeditformat="##,##0" edittype="mask"/>
                                <Cell col="6" text="bind:PRICE" textAlign="right" maskeditformat="##,##0"/>
                                <Cell col="7" text="bind:TOTAL_PRICE" textAlign="right" maskeditformat="##,##0"/>
                              </Band>
                              <Band id="summary">
                                <Cell colspan="7" text="합   계 : " textAlign="right"/>
                                <Cell col="7" text="expr:comp.parent.parent.parent.parent.parent.parent.fn_sumPrice()" displaytype="mask" textAlign="right" maskeditformat="##,###"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                        <Button id="btn_add" taborder="3" left="436" top="21" height="21" text="추가" cssclass="btn_WF_main1" onclick="Tab00_Tabpage1_btn_add_onclick" width="45"/>
                        <Button id="btn_del" taborder="4" left="486" top="21" height="21" text="공제" cssclass="btn_WF_main1" onclick="Div00_btn_del_onclick" width="45"/>
                      </Layout>
                    </Layouts>
                  </Div>
                  <Div id="Div01_00" taborder="2" text="Div01" left="880" top="15" width="500" height="298">
                    <Layouts>
                      <Layout>
                        <Static id="Static12" taborder="0" text="장지 선택 내역" left="0" top="23" width="97" height="21" cssclass="sta_WF_title"/>
                        <Grid id="Grid01_00_00_00" taborder="1" left="1" top="50" autofittype="col" oncellclick="Grid01_00_oncellclick" bottom="0" autoenter="select" right="0" binddataset="ds_list_5">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="37"/>
                                <Column size="133"/>
                                <Column size="229"/>
                                <Column size="99"/>
                              </Columns>
                              <Rows>
                                <Row size="36" band="head"/>
                                <Row size="24"/>
                                <Row size="24" band="summ"/>
                              </Rows>
                              <Band id="head">
                                <Cell text="순번"/>
                                <Cell col="1" text="장지시설"/>
                                <Cell col="2" text="품명"/>
                                <Cell col="3" text="금액"/>
                              </Band>
                              <Band id="body">
                                <Cell text="expr:currow + 1" textAlign="center"/>
                                <Cell col="1" text="bind:DIV" textAlign="center" combodataset="ds_item" combocodecol="CODE" combodatacol="CODE_NAME" combotype="filterlike"/>
                                <Cell col="2" text="bind:ITEM_NM" textAlign="left" combodataset="ds_item" combocodecol="CODE" combodatacol="CODE_NAME" combotype="filterlike"/>
                                <Cell col="3" text="bind:PRICE" textAlign="right" maskeditformat="##,##0"/>
                              </Band>
                              <Band id="summary">
                                <Cell colspan="3" text="합   계 : " textAlign="right"/>
                                <Cell col="3" text="expr:dataset.getSum(&quot;PRICE&quot;)" displaytype="mask" textAlign="right" maskeditformat="##,###"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                      </Layout>
                    </Layouts>
                  </Div>
                  <Div id="Div02" taborder="3" text="Div02" left="334" top="320" width="916" height="146">
                    <Layouts>
                      <Layout>
                        <Static id="Static12" taborder="0" text="종합 내역" left="7" top="1" width="97" height="30" cssclass="sta_WF_title"/>
                        <Static id="Static00_00_00" taborder="1" text="■ 서비스명 : " left="9" top="32" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00" taborder="2" text="■ 서비스금액 : " left="9" top="57" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_00" taborder="3" text="- 공제내역 : " left="24" top="82" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_00_00" taborder="4" text="- 추가내역 : " left="24" top="107" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_01" taborder="5" text="■ 장례식장명 : " left="269" top="32" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_01" taborder="6" text="■ 장례식장 시설 사용료 : " left="269" top="57" width="154" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_00_01" taborder="7" text="(빈소 : " left="284" top="82" width="41" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;" visible="false"/>
                        <Static id="Static00_00_00_00_00_01_00" taborder="8" text="평 기준)" left="364" top="82" width="49" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;" visible="false"/>
                        <Static id="Static00_00_00_01_00" taborder="9" text="■ 화장장명 : " left="599" top="32" width="80" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_01_00" taborder="10" text="■ 봉안당명 : " left="599" top="57" width="80" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_01_00_00" taborder="11" text="■ 총 예상 금액 : " left="599" top="82" width="100" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;" background="#fafdc8"/>
                        <Static id="S_item" taborder="12" left="93" top="33" width="156" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_F_NM" taborder="13" left="360" top="33" width="234" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_CREM_NM" taborder="14" left="680" top="33" width="234" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_J_NM" taborder="15" left="680" top="61" width="234" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_F_COST" taborder="16" left="413" top="61" width="181" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_ITEM_COST" taborder="17" left="103" top="61" width="156" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_ITEM_DEL" taborder="18" left="103" top="87" width="156" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_ITEM_ADD" taborder="19" left="103" top="113" width="156" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_TOT_COST" taborder="20" left="706" top="85" width="208" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                      </Layout>
                    </Layouts>
                  </Div>
                  <Button id="btn_add" taborder="4" left="1310" top="4" height="21" text="저장" cssclass="btn_WF_main1" onclick="fn_save" width="70"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="Tabpage3" text="안심견적 3">
              <Layouts>
                <Layout>
                  <Div id="Div00" taborder="0" text="Div00" left="0" top="4" width="313" height="464">
                    <Layouts>
                      <Layout>
                        <Static id="sta_21_00_00_00_00" taborder="27" left="99" top="402" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21_00_00_00" taborder="22" left="99" top="374" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21_00_00" taborder="18" left="99" top="281" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21_00_00_00_00_00_00" taborder="12" left="99" top="192" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21_00_00_00_00_00" taborder="10" left="99" top="164" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21_00" taborder="6" left="99" top="136" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="sta_21" taborder="2" left="99" top="46" height="29" cssclass="sta_WF_detailLine" right="5"/>
                        <Static id="Static00_00" taborder="1" text="1. 상품선택" left="-1" top="12" width="80" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static23" taborder="0" text="상품" left="0" top="46" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Static id="Static00_00_00" taborder="3" text="3. 장례식장 선택" left="-1" top="102" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static23_00" taborder="4" text="장례식장" left="0" top="136" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Button id="btn_preno00" taborder="7" top="140" height="21" cssclass="btn_WF_search" text="" width="21" right="10"/>
                        <Edit id="edt_soNo00" taborder="5" left="104" top="140" height="21" readonly="true" enable="true" right="btn_preno00:0"/>
                        <Static id="Static23_00_00_00_00_00" taborder="8" text="빈소 사용료" left="0" top="164" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Combo id="cmb_age00" taborder="9" top="168" height="21" text="선택" value="" index="-1" codecolumn="FN_SEQ" datacolumn="PLACE_NM" type="filterlike" autoselect="true" onsetfocus="Div00_cmb_hsCd_oneditclick" innerdataset="ds_place" right="31" left="104" onitemchanged="Tab00_Tabpage1_Div00_cmb_age00_onitemchanged"/>
                        <Static id="Static23_00_00_00_00_00_00" taborder="11" text="제물비" left="0" top="192" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Div id="div_mCombo8" taborder="13" text="Div00" left="104" top="196" height="23" url="Comm::Comm_MultiCombo.xfdl" combocodecolumn="ITEM_CD" combodatacolumn="ITEM_NM" comboinnerdataset="ds_fa_item" callbackfunc="fn_mComboCallback" right="10"/>
                        <Static id="Static00_00_00_00" taborder="14" text="4. 화장장 선택" left="-1" top="247" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static23_00_00" taborder="15" text="화장장" left="0" top="281" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Button id="btn_preno00_00" taborder="17" top="285" height="21" cssclass="btn_WF_search" text="" width="21" right="10"/>
                        <Edit id="edt_soNo00_00" taborder="16" left="104" top="285" height="21" readonly="true" enable="true" right="btn_preno00_00:0"/>
                        <Static id="Static00_00_00_00_00" taborder="19" text="5. 장지 선택" left="-1" top="340" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static23_00_00_00" taborder="20" text="장지" left="0" top="374" width="100" cssclass="sta_WF_detailLabel_ess" height="29"/>
                        <Button id="btn_preno00_00_00" taborder="23" top="378" height="21" cssclass="btn_WF_search" text="" right="10" width="21"/>
                        <Edit id="edt_soNo00_00_00" taborder="21" height="21" readonly="true" enable="true" right="btn_preno00_00_00:0" top="378" left="104"/>
                        <Combo id="cmb_item" taborder="24" left="104" top="50" width="199" height="21" text="선택" value="" index="-1" codecolumn="GOODS_NO" datacolumn="GOODS_NM" type="filterlike" autoselect="true" innerdataset="ds_item" onitemchanged="Tab00_Tabpage1_Div00_cmb_item_onitemchanged"/>
                        <Button id="btn_preno00_01" taborder="25" top="168" height="21" cssclass="btn_WF_search" text="" width="21" right="10"/>
                        <Static id="Static23_00_00_00_00" taborder="26" text="구분" left="0" top="402" width="100" cssclass="sta_WF_detailLabel" height="29"/>
                        <Combo id="cmb_age00_00" taborder="28" top="406" height="21" text="선택" value="" index="-1" codecolumn="CODE" datacolumn="CODE_NAME" type="filterlike" autoselect="true" onsetfocus="Div00_cmb_hsCd_oneditclick" right="31" left="104" readonly="true"/>
                      </Layout>
                    </Layouts>
                  </Div>
                  <Div id="Div01" taborder="1" text="Div01" left="333" top="15" height="298" width="535">
                    <Layouts>
                      <Layout>
                        <Static id="Static00_00" taborder="0" text="2. 추가 / 공제상품 선택" left="-1" top="-6" width="135" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static12" taborder="1" text="상품 선택 내역" left="0" top="23" width="97" height="21" cssclass="sta_WF_title"/>
                        <Grid id="Grid01_00_00_00" taborder="2" left="0" top="50" autofittype="col" oncellclick="Grid01_00_oncellclick" bottom="0" autoenter="select" right="2" binddataset="ds_list_6">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="37"/>
                                <Column size="60"/>
                                <Column size="73"/>
                                <Column size="134"/>
                                <Column size="35"/>
                                <Column size="44"/>
                                <Column size="81"/>
                                <Column size="81"/>
                              </Columns>
                              <Rows>
                                <Row size="36" band="head"/>
                                <Row size="24"/>
                                <Row size="24" band="summ"/>
                              </Rows>
                              <Band id="head">
                                <Cell text="순번"/>
                                <Cell col="1" text="추가/공제"/>
                                <Cell col="2" text="품목코드"/>
                                <Cell col="3" colspan="2" text="품명"/>
                                <Cell col="5" text="수량"/>
                                <Cell col="6" text="단가"/>
                                <Cell col="7" text="금액"/>
                              </Band>
                              <Band id="body">
                                <Cell text="expr:currow + 1" textAlign="center"/>
                                <Cell col="1" text="bind:ADD_DEL_YN" textAlign="center"/>
                                <Cell col="2" text="bind:ITEM_CD" textAlign="center" combodataset="ds_item" combocodecol="CODE" combodatacol="CODE_NAME" combotype="filterlike"/>
                                <Cell col="3" text="bind:ITEM_NM" textAlign="left" combodataset="ds_item" combocodecol="CODE" combodatacol="CODE_NAME" combotype="filterlike"/>
                                <Cell col="4" textAlign="center" maskeditformat="##,##0" edittype="expr:ADD_DEL_YN=='추가' ? 'button' : ''" text="expr:ADD_DEL_YN=='추가' ? '찾기' : ''" displaytype="expr:ADD_DEL_YN=='추가' ? 'buttoncontrol' : ''"/>
                                <Cell col="5" text="bind:QTY" textAlign="center" maskeditformat="##,##0" edittype="mask"/>
                                <Cell col="6" text="bind:PRICE" textAlign="right" maskeditformat="##,##0"/>
                                <Cell col="7" text="bind:TOTAL_PRICE" textAlign="right" maskeditformat="##,##0"/>
                              </Band>
                              <Band id="summary">
                                <Cell colspan="7" text="합   계 : " textAlign="right"/>
                                <Cell col="7" text="expr:comp.parent.parent.parent.parent.parent.parent.fn_sumPrice()" displaytype="mask" textAlign="right" maskeditformat="##,###"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                        <Button id="btn_add" taborder="3" left="436" top="21" height="21" text="추가" cssclass="btn_WF_main1" onclick="Tab00_Tabpage1_btn_add_onclick" width="45"/>
                        <Button id="btn_del" taborder="4" left="486" top="21" height="21" text="공제" cssclass="btn_WF_main1" onclick="Div00_btn_del_onclick" width="45"/>
                      </Layout>
                    </Layouts>
                  </Div>
                  <Div id="Div01_00" taborder="2" text="Div01" left="880" top="15" width="500" height="298">
                    <Layouts>
                      <Layout>
                        <Static id="Static12" taborder="0" text="장지 선택 내역" left="0" top="23" width="97" height="21" cssclass="sta_WF_title"/>
                        <Grid id="Grid01_00_00_00" taborder="1" left="1" top="50" autofittype="col" oncellclick="Grid01_00_oncellclick" bottom="0" autoenter="select" right="0" binddataset="ds_list_7">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="37"/>
                                <Column size="133"/>
                                <Column size="229"/>
                                <Column size="99"/>
                              </Columns>
                              <Rows>
                                <Row size="36" band="head"/>
                                <Row size="24"/>
                                <Row size="24" band="summ"/>
                              </Rows>
                              <Band id="head">
                                <Cell text="순번"/>
                                <Cell col="1" text="장지시설"/>
                                <Cell col="2" text="품명"/>
                                <Cell col="3" text="금액"/>
                              </Band>
                              <Band id="body">
                                <Cell text="expr:currow + 1" textAlign="center"/>
                                <Cell col="1" text="bind:DIV" textAlign="center" combodataset="ds_item" combocodecol="CODE" combodatacol="CODE_NAME" combotype="filterlike"/>
                                <Cell col="2" text="bind:ITEM_NM" textAlign="left" combodataset="ds_item" combocodecol="CODE" combodatacol="CODE_NAME" combotype="filterlike"/>
                                <Cell col="3" text="bind:PRICE" textAlign="right" maskeditformat="##,##0"/>
                              </Band>
                              <Band id="summary">
                                <Cell colspan="3" text="합   계 : " textAlign="right"/>
                                <Cell col="3" text="expr:dataset.getSum(&quot;PRICE&quot;)" displaytype="mask" textAlign="right" maskeditformat="##,###"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                      </Layout>
                    </Layouts>
                  </Div>
                  <Div id="Div02" taborder="3" text="Div02" left="334" top="320" width="916" height="146">
                    <Layouts>
                      <Layout>
                        <Static id="Static12" taborder="0" text="종합 내역" left="7" top="1" width="97" height="30" cssclass="sta_WF_title"/>
                        <Static id="Static00_00_00" taborder="1" text="■ 서비스명 : " left="9" top="32" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00" taborder="2" text="■ 서비스금액 : " left="9" top="57" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_00" taborder="3" text="- 공제내역 : " left="24" top="82" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_00_00" taborder="4" text="- 추가내역 : " left="24" top="107" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_01" taborder="5" text="■ 장례식장명 : " left="269" top="32" width="104" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_01" taborder="6" text="■ 장례식장 시설 사용료 : " left="269" top="57" width="154" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_00_01" taborder="7" text="(빈소 : " left="284" top="82" width="41" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;" visible="false"/>
                        <Static id="Static00_00_00_00_00_01_00" taborder="8" text="평 기준)" left="364" top="82" width="49" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;" visible="false"/>
                        <Static id="Static00_00_00_01_00" taborder="9" text="■ 화장장명 : " left="599" top="32" width="80" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_01_00" taborder="10" text="■ 봉안당명 : " left="599" top="57" width="80" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="Static00_00_00_00_01_00_00" taborder="11" text="■ 총 예상 금액 : " left="599" top="82" width="100" height="25" textAlign="left" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;" background="#fafdc8"/>
                        <Static id="S_item" taborder="12" left="93" top="33" width="156" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_F_NM" taborder="13" left="360" top="33" width="234" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_CREM_NM" taborder="14" left="680" top="33" width="234" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_J_NM" taborder="15" left="680" top="61" width="234" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_F_COST" taborder="16" left="413" top="61" width="181" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_ITEM_COST" taborder="17" left="103" top="61" width="156" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_ITEM_DEL" taborder="18" left="103" top="87" width="156" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_ITEM_ADD" taborder="19" left="103" top="113" width="156" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                        <Static id="S_TOT_COST" taborder="20" left="706" top="85" width="208" height="20" font="bold 12px &quot;Malgun Gothic&quot;,&quot;Verdana&quot;"/>
                      </Layout>
                    </Layouts>
                  </Div>
                  <Button id="btn_add" taborder="4" left="1310" top="4" height="21" text="저장" cssclass="btn_WF_main1" onclick="fn_save" width="70"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_list_1">
        <ColumnInfo>
          <Column id="PRE_RCPT_NO" type="STRING" size="18"/>
          <Column id="SEQ" type="BIGDECIMAL" size="6"/>
          <Column id="CUST_NM" type="STRING" size="20"/>
          <Column id="CUST_AGE" type="STRING" size="20"/>
          <Column id="CUST_TEL" type="STRING" size="20"/>
          <Column id="CUST_GENDER" type="STRING" size="20"/>
          <Column id="KNOW_PATH" type="STRING" size="20"/>
          <Column id="E_MAIL" type="STRING" size="50"/>
          <Column id="OWN_NM" type="STRING" size="20"/>
          <Column id="OWN_GENDER" type="STRING" size="20"/>
          <Column id="OWN_REL" type="STRING" size="20"/>
          <Column id="OWN_AGE" type="STRING" size="20"/>
          <Column id="CUR_REGION" type="STRING" size="2000"/>
          <Column id="CUR_RESIDENCE" type="STRING" size="20"/>
          <Column id="CUR_ADDR" type="STRING" size="200"/>
          <Column id="BASIC_LIVING" type="STRING" size="20"/>
          <Column id="CUR_CONDITION" type="STRING" size="20"/>
          <Column id="ESTN_NO" type="STRING" size="256"/>
          <Column id="ESTN_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_2" oncolumnchanged="ds_list_2_oncolumnchanged">
        <ColumnInfo>
          <Column id="ESTN_NO" type="STRING" size="256"/>
          <Column id="ESTN_SEQ" type="STRING" size="256"/>
          <Column id="MG_NO" type="STRING" size="18"/>
          <Column id="MG_SEQ" type="BIGDECIMAL" size="6"/>
          <Column id="ITEM_CD" type="STRING" size="18"/>
          <Column id="ITEM_NM" type="STRING" size="30"/>
          <Column id="QTY" type="BIGDECIMAL" size="17"/>
          <Column id="PRICE" type="BIGDECIMAL" size="17"/>
          <Column id="ADD_DEL_YN" type="STRING" size="256"/>
          <Column id="TOTAL_PRICE" type="BIGDECIMAL" size="256"/>
          <Column id="DDT_FLG" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_user"/>
      <Dataset id="ds_list_out"/>
      <Dataset id="ds_item"/>
      <Dataset id="ds_cond">
        <ColumnInfo>
          <Column id="ESTN_NO" type="STRING" size="256"/>
          <Column id="ITEM" type="STRING" size="256"/>
          <Column id="FN_NO" type="STRING" size="256"/>
          <Column id="PLACE_NM" type="BIGDECIMAL" size="17"/>
          <Column id="FA_ITEM" type="STRING" size="256"/>
          <Column id="FACL_NM" type="STRING" size="256"/>
          <Column id="ZONE_SEQ" type="BIGDECIMAL" size="17"/>
          <Column id="HUMAN_SEQ" type="BIGDECIMAL" size="17"/>
          <Column id="CREM_NO" type="STRING" size="256"/>
          <Column id="CREM_NM" type="STRING" size="256"/>
          <Column id="BRL_SEQ" type="BIGDECIMAL" size="17"/>
          <Column id="BRL_NO" type="STRING" size="256"/>
          <Column id="BRL_NM" type="STRING" size="256"/>
          <Column id="DIV2" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_place"/>
      <Dataset id="ds_fa_item"/>
      <Dataset id="ds_empty"/>
      <Dataset id="ds_div"/>
      <Dataset id="ds_list_3" oncolumnchanged="ds_list_3_oncolumnchanged">
        <ColumnInfo>
          <Column id="ESTN_NO" type="STRING" size="256"/>
          <Column id="ESTN_SEQ" type="STRING" size="256"/>
          <Column id="MG_NO" type="STRING" size="18"/>
          <Column id="MG_SEQ" type="BIGDECIMAL" size="6"/>
          <Column id="ZONE_SEQ" type="STRING" size="30"/>
          <Column id="DIV" type="STRING" size="1"/>
          <Column id="ITEM_CD" type="STRING" size="20"/>
          <Column id="ITEM_NM" type="STRING" size="500"/>
          <Column id="PRICE" type="BIGDECIMAL" size="17"/>
          <Column id="QTY" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_4" oncolumnchanged="ds_list_2_oncolumnchanged">
        <ColumnInfo>
          <Column id="ESTN_NO" type="STRING" size="256"/>
          <Column id="ESTN_SEQ" type="STRING" size="256"/>
          <Column id="MG_NO" type="STRING" size="18"/>
          <Column id="MG_SEQ" type="BIGDECIMAL" size="6"/>
          <Column id="ITEM_CD" type="STRING" size="18"/>
          <Column id="ITEM_NM" type="STRING" size="30"/>
          <Column id="QTY" type="BIGDECIMAL" size="17"/>
          <Column id="PRICE" type="BIGDECIMAL" size="17"/>
          <Column id="ADD_DEL_YN" type="STRING" size="256"/>
          <Column id="TOTAL_PRICE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_5">
        <ColumnInfo>
          <Column id="ESTN_NO" type="STRING" size="256"/>
          <Column id="ESTN_SEQ" type="STRING" size="256"/>
          <Column id="MG_NO" type="STRING" size="18"/>
          <Column id="MG_SEQ" type="BIGDECIMAL" size="6"/>
          <Column id="ZONE_SEQ" type="STRING" size="30"/>
          <Column id="DIV" type="STRING" size="1"/>
          <Column id="ITEM_CD" type="STRING" size="20"/>
          <Column id="ITEM_NM" type="STRING" size="500"/>
          <Column id="PRICE" type="BIGDECIMAL" size="17"/>
          <Column id="QTY" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_6" oncolumnchanged="ds_list_2_oncolumnchanged">
        <ColumnInfo>
          <Column id="ESTN_NO" type="STRING" size="256"/>
          <Column id="ESTN_SEQ" type="STRING" size="256"/>
          <Column id="MG_NO" type="STRING" size="18"/>
          <Column id="MG_SEQ" type="BIGDECIMAL" size="6"/>
          <Column id="ITEM_CD" type="STRING" size="18"/>
          <Column id="ITEM_NM" type="STRING" size="30"/>
          <Column id="QTY" type="BIGDECIMAL" size="17"/>
          <Column id="PRICE" type="BIGDECIMAL" size="17"/>
          <Column id="ADD_DEL_YN" type="STRING" size="256"/>
          <Column id="TOTAL_PRICE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_7">
        <ColumnInfo>
          <Column id="ESTN_NO" type="STRING" size="256"/>
          <Column id="ESTN_SEQ" type="STRING" size="256"/>
          <Column id="MG_NO" type="STRING" size="18"/>
          <Column id="MG_SEQ" type="BIGDECIMAL" size="6"/>
          <Column id="ZONE_SEQ" type="STRING" size="30"/>
          <Column id="DIV" type="STRING" size="1"/>
          <Column id="ITEM_CD" type="STRING" size="20"/>
          <Column id="ITEM_NM" type="STRING" size="500"/>
          <Column id="PRICE" type="BIGDECIMAL" size="17"/>
          <Column id="QTY" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond2">
        <ColumnInfo>
          <Column id="ITEM" type="STRING" size="256"/>
          <Column id="FN_NO" type="STRING" size="256"/>
          <Column id="PLACE_NM" type="BIGDECIMAL" size="17"/>
          <Column id="FA_ITEM" type="STRING" size="256"/>
          <Column id="FACL_NM" type="STRING" size="256"/>
          <Column id="ZONE_SEQ" type="BIGDECIMAL" size="17"/>
          <Column id="HUMAN_SEQ" type="BIGDECIMAL" size="17"/>
          <Column id="CREM_NO" type="STRING" size="256"/>
          <Column id="CREM_NM" type="STRING" size="256"/>
          <Column id="BRL_SEQ" type="BIGDECIMAL" size="17"/>
          <Column id="BRL_NO" type="STRING" size="256"/>
          <Column id="BRL_NM" type="STRING" size="256"/>
          <Column id="DIV2" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="ITEM"/>
            <Col id="FN_NO"/>
            <Col id="PLACE_NM"/>
            <Col id="FA_ITEM"/>
            <Col id="FACL_NM"/>
            <Col id="ZONE_SEQ"/>
            <Col id="HUMAN_SEQ"/>
            <Col id="CREM_NM"/>
            <Col id="CREM_NO"/>
            <Col id="BRL_SEQ"/>
            <Col id="BRL_NO"/>
            <Col id="BRL_NM"/>
            <Col id="DIV2"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cond3">
        <ColumnInfo>
          <Column id="ITEM" type="STRING" size="256"/>
          <Column id="FN_NO" type="STRING" size="256"/>
          <Column id="PLACE_NM" type="BIGDECIMAL" size="17"/>
          <Column id="FA_ITEM" type="STRING" size="256"/>
          <Column id="FACL_NM" type="STRING" size="256"/>
          <Column id="ZONE_SEQ" type="BIGDECIMAL" size="17"/>
          <Column id="HUMAN_SEQ" type="BIGDECIMAL" size="17"/>
          <Column id="CREM_NO" type="STRING" size="256"/>
          <Column id="CREM_NM" type="STRING" size="256"/>
          <Column id="BRL_SEQ" type="BIGDECIMAL" size="17"/>
          <Column id="BRL_NO" type="STRING" size="256"/>
          <Column id="BRL_NM" type="STRING" size="256"/>
          <Column id="DIV2" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="ITEM"/>
            <Col id="FN_NO"/>
            <Col id="PLACE_NM"/>
            <Col id="FA_ITEM"/>
            <Col id="FACL_NM"/>
            <Col id="ZONE_SEQ"/>
            <Col id="HUMAN_SEQ"/>
            <Col id="CREM_NM"/>
            <Col id="CREM_NO"/>
            <Col id="BRL_SEQ"/>
            <Col id="BRL_NO"/>
            <Col id="BRL_NM"/>
            <Col id="DIV2"/>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item14" compid="edt_soNo00" propid="value" datasetid="ds_list" columnid="SO_NO"/>
      <BindItem id="item15" compid="edt_soNo00_00" propid="value" datasetid="ds_list" columnid="SO_NO"/>
      <BindItem id="item16" compid="edt_soNo00_00_00" propid="value" datasetid="ds_list" columnid="SO_NO"/>
      <BindItem id="item18" compid="edt_soNo00_00_00_00" propid="value" datasetid="ds_list" columnid="SO_NO"/>
      <BindItem id="item19" compid="edt_soNo00_00_00_00_00" propid="value" datasetid="ds_list" columnid="SO_NO"/>
      <BindItem id="item0" compid="Div00.form.edt_soNo" propid="value" datasetid="ds_list_1" columnid="PRE_RCPT_NO"/>
      <BindItem id="item1" compid="Div00.form.edt_soNo00" propid="value" datasetid="ds_list_1" columnid="SEQ"/>
      <BindItem id="item2" compid="Div06_00.form.edt_soNo00_00_01_00_00" propid="value" datasetid="ds_list_1" columnid="CUST_NM"/>
      <BindItem id="item3" compid="Div06_00.form.edt_soNo00_00" propid="value" datasetid="ds_list_1" columnid="CUST_TEL"/>
      <BindItem id="item4" compid="Div06_00.form.cmb_age" propid="value" datasetid="ds_list_1" columnid="CUST_AGE"/>
      <BindItem id="item5" compid="Div06_00.form.cmb_age00" propid="value" datasetid="ds_list_1" columnid="KNOW_PATH"/>
      <BindItem id="item6" compid="Div06_00.form.edt_soNo00_00_00" propid="value" datasetid="ds_list_1" columnid="E_MAIL"/>
      <BindItem id="item7" compid="Div06_00.form.cmb_age01" propid="value" datasetid="ds_list_1" columnid="CUST_GENDER"/>
      <BindItem id="item8" compid="Tab00.Tabpage3.form.Div06_00.form.edt_soNo00_00_01_00_00" propid="value" datasetid="ds_list_1" columnid="CUST_NM"/>
      <BindItem id="item9" compid="Tab00.Tabpage3.form.Div06_00.form.edt_soNo00_00" propid="value" datasetid="ds_list_1" columnid="CUST_TEL"/>
      <BindItem id="item10" compid="Tab00.Tabpage3.form.Div06_00.form.cmb_age" propid="value" datasetid="ds_list_1" columnid="CUST_AGE"/>
      <BindItem id="item11" compid="Tab00.Tabpage3.form.Div06_00.form.cmb_age00" propid="value" datasetid="ds_list_1" columnid="KNOW_PATH"/>
      <BindItem id="item12" compid="Tab00.Tabpage3.form.Div06_00.form.edt_soNo00_00_00" propid="value" datasetid="ds_list_1" columnid="E_MAIL"/>
      <BindItem id="item13" compid="Tab00.Tabpage3.form.Div06_00.form.cmb_age01" propid="value" datasetid="ds_list_1" columnid="CUST_GENDER"/>
      <BindItem id="item17" compid="Div06.form.cmb_curCondition" propid="value" datasetid="ds_list_1" columnid="CUR_CONDITION"/>
      <BindItem id="item20" compid="Div06.form.cmb_age" propid="value" datasetid="ds_list_1" columnid="OWN_AGE"/>
      <BindItem id="item21" compid="Div06.form.cmb_age00" propid="value" datasetid="ds_list_1" columnid="CUR_RESIDENCE"/>
      <BindItem id="item22" compid="Div06.form.cmb_age00_00" propid="value" datasetid="ds_list_1" columnid="BASIC_LIVING"/>
      <BindItem id="item23" compid="Div06.form.cmb_age01" propid="value" datasetid="ds_list_1" columnid="OWN_REL"/>
      <BindItem id="item24" compid="Div06.form.edt_soNo00_00_01" propid="value" datasetid="ds_list_1" columnid="CUR_REGION"/>
      <BindItem id="item25" compid="Div06.form.edt_soNo00_00_00_00_00" propid="value" datasetid="ds_list_1" columnid="CUR_ADDR"/>
      <BindItem id="item26" compid="Div06.form.cmb_age01_00" propid="value" datasetid="ds_list_1" columnid="OWN_GENDER"/>
      <BindItem id="item27" compid="Div06.form.edt_soNo00_00_01_00_00" propid="value" datasetid="ds_list_1" columnid="OWN_NM"/>
      <BindItem id="item28" compid="Tab00.Tabpage1.form.Div00.form.cmb_item" propid="value" datasetid="ds_cond" columnid="ITEM"/>
      <BindItem id="item29" compid="Tab00.Tabpage1.form.Div00.form.edt_soNo00" propid="value" datasetid="ds_cond" columnid="FACL_NM"/>
      <BindItem id="item30" compid="Tab00.Tabpage1.form.Div00.form.cmb_age00" propid="value" datasetid="ds_cond" columnid="PLACE_NM"/>
      <BindItem id="item31" compid="Tab00.Tabpage1.form.Div00.form.edt_soNo00_00" propid="value" datasetid="ds_cond" columnid="CREM_NM"/>
      <BindItem id="item32" compid="Tab00.Tabpage1.form.Div00.form.cmb_age00_00" propid="value" datasetid="ds_cond" columnid="DIV2"/>
      <BindItem id="item33" compid="Tab00.Tabpage1.form.Div00.form.edt_soNo00_00_00" propid="value" datasetid="ds_cond" columnid="BRL_NM"/>
      <BindItem id="item34" compid="Tab00.Tabpage1.form.Div02.form.S_F_NM" propid="text" datasetid="ds_cond" columnid="FACL_NM"/>
      <BindItem id="item35" compid="Tab00.Tabpage1.form.Div02.form.S_CREM_NM" propid="text" datasetid="ds_cond" columnid="CREM_NM"/>
      <BindItem id="item36" compid="Tab00.Tabpage1.form.Div02.form.S_J_NM" propid="text" datasetid="ds_cond" columnid="BRL_NM"/>
      <BindItem id="item37" compid="Tab00.Tabpage2.form.Div00.form.cmb_item" propid="value" datasetid="ds_cond2" columnid="ITEM"/>
      <BindItem id="item38" compid="Tab00.Tabpage2.form.Div00.form.edt_soNo00" propid="value" datasetid="ds_cond2" columnid="FACL_NM"/>
      <BindItem id="item39" compid="Tab00.Tabpage2.form.Div00.form.cmb_age00" propid="value" datasetid="ds_cond2" columnid="PLACE_NM"/>
      <BindItem id="item40" compid="Tab00.Tabpage2.form.Div00.form.edt_soNo00_00" propid="value" datasetid="ds_cond2" columnid="CREM_NM"/>
      <BindItem id="item41" compid="Tab00.Tabpage2.form.Div00.form.cmb_age00_00" propid="value" datasetid="ds_cond2" columnid="DIV2"/>
      <BindItem id="item42" compid="Tab00.Tabpage2.form.Div00.form.edt_soNo00_00_00" propid="value" datasetid="ds_cond2" columnid="BRL_NM"/>
      <BindItem id="item43" compid="Tab00.Tabpage2.form.Div02.form.S_F_NM" propid="text" datasetid="ds_cond" columnid="FACL_NM"/>
      <BindItem id="item44" compid="Tab00.Tabpage2.form.Div02.form.S_CREM_NM" propid="text" datasetid="ds_cond" columnid="CREM_NM"/>
      <BindItem id="item45" compid="Tab00.Tabpage2.form.Div02.form.S_J_NM" propid="text" datasetid="ds_cond" columnid="BRL_NM"/>
      <BindItem id="item46" compid="Tab00.Tabpage3.form.Div00.form.cmb_item" propid="value" datasetid="ds_cond3" columnid="ITEM"/>
      <BindItem id="item47" compid="Tab00.Tabpage3.form.Div00.form.edt_soNo00" propid="value" datasetid="ds_cond3" columnid="FACL_NM"/>
      <BindItem id="item48" compid="Tab00.Tabpage3.form.Div00.form.cmb_age00" propid="value" datasetid="ds_cond3" columnid="PLACE_NM"/>
      <BindItem id="item49" compid="Tab00.Tabpage3.form.Div00.form.edt_soNo00_00" propid="value" datasetid="ds_cond3" columnid="CREM_NM"/>
      <BindItem id="item50" compid="Tab00.Tabpage3.form.Div00.form.cmb_age00_00" propid="value" datasetid="ds_cond3" columnid="DIV2"/>
      <BindItem id="item51" compid="Tab00.Tabpage3.form.Div00.form.edt_soNo00_00_00" propid="value" datasetid="ds_cond3" columnid="BRL_NM"/>
      <BindItem id="item52" compid="Tab00.Tabpage3.form.Div02.form.S_F_NM" propid="text" datasetid="ds_cond" columnid="FACL_NM"/>
      <BindItem id="item53" compid="Tab00.Tabpage3.form.Div02.form.S_CREM_NM" propid="text" datasetid="ds_cond" columnid="CREM_NM"/>
      <BindItem id="item54" compid="Tab00.Tabpage3.form.Div02.form.S_J_NM" propid="text" datasetid="ds_cond" columnid="BRL_NM"/>
      <BindItem id="item55" compid="Div00.form.edt_soNo01" propid="value" datasetid="ds_list_1" columnid="ESTN_NO"/>
    </Bind>
    <Script type="xscript5.1"><![CDATA[/**
*  Left Menu
*  @MenuPath    PCS > 견적산출
*  @FileName 	FM004.xfdl 
*  @Creator 	심재문
*  @CreateDate 	2020.12.03
*  @Desction    
*************************** 소스 수정 이력 ************************************
*  date          		        Modifier                      Description
*******************************************************************************
*  
*******************************************************************************
*/

/************************************************************************************************
 * FORM 변수 선언 영역
 ************************************************************************************************/
this.objApp = nexacro.getApplication();

/***********************************************************************************************
* FORM EVENT 영역(onload)
/***********************************************************************************************/
this.FM004_onload = function(obj:nexacro.Form,e:nexacro.LoadEventInfo)
{
	this.gfn_formOnLoad(this);	
	
	this.fn_setCombo(obj);
};

// 콤보 세팅
this.fn_setCombo = function (obj)
{
	this.efn_SetComboData(obj,this.objApp.gds_code2,"ds_know2",this.Div06_00.form.cmb_age00,"MAJOR_CODE=='PC015'",false,false);						// 인지경로
	this.efn_SetComboData(obj,this.objApp.gds_code2,"ds_gender7",this.Div06_00.form.cmb_age01,"MAJOR_CODE=='SO008'",false,false);					// 성별
	this.efn_SetComboData(obj,this.objApp.gds_code2,"ds_age4",this.Div06_00.form.cmb_age,"MAJOR_CODE=='PC009'",false,false);						// 나이
	this.efn_SetComboData(obj,this.objApp.gds_code2,"ds_gender8",this.Div06.form.cmb_age01_00,"MAJOR_CODE=='SO008'",false,false);					// 성별
	this.efn_SetComboData(obj,this.objApp.gds_code2,"ds_age3",this.Div06.form.cmb_age,"MAJOR_CODE=='PC009'",false,false);							// 나이
	this.efn_SetComboData(obj,this.objApp.gds_code2,"ds_cur2",this.Div06.form.cmb_age00,"MAJOR_CODE=='PC010'",false,false);							// 거주시설
	this.efn_SetComboData(obj,this.objApp.gds_code2,"ds_basic2",this.Div06.form.cmb_age00_00,"MAJOR_CODE=='PC011'",false,false);					// 정부지원
	this.efn_SetComboData(obj,this.objApp.gds_code2,"ds_curCondition2",this.Div06.form.cmb_curCondition,"MAJOR_CODE=='SO003'",false,false);			// 현재상황
	this.efn_SetComboData2(obj,this.objApp.gds_code2,"ds_div2",this.Tab00.Tabpage1.form.Div00.form.cmb_age00_00,"MAJOR_CODE=='ES018'",true,true);	// 구분					
	
	

// 	this.Tab00.Tabpage1.form.Div06_01.form.div_mCombo1.form.fn_setDataset(this.ds_ready_item);
// 	this.Tab00.Tabpage1.form.Div06_01.form.div_mCombo2.form.fn_setDataset(this.ds_add_item);

	
 	this.efn_SetGrdUserData(this.ds_user,this.objApp.gds_user);
	
	// 상품 IN 데이터셋 조회
	var id = "FM004_P05_S";
	var url = "svcUrl::FM004_P05_S";
	var inDs = "";
	var outDs = "ds_item=ds_list";
	var args = "";
	var callBackid = "fn_afterItemSearch";
		
	this.gfn_transaction( id, url, inDs, outDs, args, callBackid);
};

// 조회 callback
this.fn_afterItemSearch = function (strSvcID, nErrorCode, strErrorMag) {
	if (nErrorCode < 0) 
	{
		this.alert(strErrorMag)
		return ;
	}
}

 /************************************************************************************************
 * 사용자 FUNCTION 영역
 ************************************************************************************************/
 
 /************************************************************************************************
 * 각 COMPONENT 별 EVENT 영역
 ************************************************************************************************/
  /**
* @description 		공통조회버튼
* @작성자	   		심재문
* @작성일자	   	2020.12.03
* @수정자	   
* @수정일자
*/
// 조회
this.fn_search = function (preNo, seq)
{	
	var id = "FM004_S01";
	var url = "svcUrl::FM004_S01";
	var inDs = "";
	var outDs = "ds_list_1=ds_list_1";
	var args = "PRE_RCPT_NO="+preNo+" SEQ="+seq+"";
	var callBackid = "fn_afterSearch";
		
	this.gfn_transaction( id, url, inDs, outDs, args, callBackid);
};

// 조회 callback
this.fn_afterSearch = function (strSvcID, nErrorCode, strErrorMag) {
	if (nErrorCode < 0) 
	{
		this.alert(strErrorMag)
		return ;
	}
	var estnNo = this.ds_list_1.getColumn(this.ds_list_1.rowposition,"ESTN_NO");
	
	var id = "FM004_S05";
	var url = "svcUrl::FM004_S05";
	var inDs = "";
	var outDs = "ds_place=ds_place";
	var args = "ESTN_NO="+estnNo+"";
	var callBackid = "fn_afterSearch5";
		
	this.gfn_transaction( id, url, inDs, outDs, args, callBackid);
}

// 조회 callback
this.fn_afterSearch5 = function (strSvcID, nErrorCode, strErrorMag) {
	if (nErrorCode < 0) 
	{
		this.alert(strErrorMag)
		return ;
	}
	
	var estnNo = this.ds_list_1.getColumn(this.ds_list_1.rowposition,"ESTN_NO");
	
	var id = "FM004_S04";
	var url = "svcUrl::FM004_S04";
	var inDs = "";
	var outDs = "ds_place=ds_place ds_cond=ds_cond ds_list_2=ds_list_2 ds_list_3=ds_list_3";
	var args = "ESTN_NO="+estnNo+"";
	var callBackid = "fn_afterSearch6";
		
	this.gfn_transaction( id, url, inDs, outDs, args, callBackid);
}

// 조회 callback
this.fn_afterSearch6 = function (strSvcID, nErrorCode, strErrorMag) {
	if (nErrorCode < 0) 
	{
		this.alert(strErrorMag)
		return ;
	}
	
	this.fn_sumEvent();
	
	if (this.ds_cond.rowcount < 1)
	{
		this.ds_cond.addRow();
	}
	
	var fnNo = this.ds_cond.getColumn(this.ds_cond.rowposition,"FN_NO");
	
	var id = "FM004_P02_S";
	var url = "svcUrl::FM004_P02_S";
	var inDs = "";
	var outDs = "ds_fa_item=ds_list_2";
	var args = "FN_NO="+fnNo+"";
	var callBackid = "fn_afterSearch7";
		
	this.gfn_transaction( id, url, inDs, outDs, args, callBackid);
}
// 조회 callback
this.fn_afterSearch7 = function (strSvcID, nErrorCode, strErrorMag) {
	if (nErrorCode < 0) 
	{
		this.alert(strErrorMag)
		return ;
	}
	
	var item = this.ds_cond.getColumn(this.ds_cond.rowposition,"FA_ITEM");
		
	if (!this.gfn_isNull(item))
	{
		this.Tab00.Tabpage1.form.Div00.form.div_mCombo8.form.fn_setDataset(this.ds_fa_item);

		this.Tab00.Tabpage1.form.Div00.form.div_mCombo8.form.set_value(item);
	}	
}

this.fn_save = function ()
{
	if(this.fn_valChk() == false)
	{
		return;
	}
	
	var regUser = this.objApp.gds_login_info.getColumn(0,"USR_ID");
	var preNo = this.ds_list_1.getColumn(this.ds_list_1.rowposition,"PRE_RCPT_NO");
	var preSeq = this.ds_list_1.getColumn(this.ds_list_1.rowposition,"SEQ");
	
	var id = "FM004_M01";
	var url = "svcUrl::FM004_M01";
	var inDs = "ds_cond=ds_cond:U";
	var outDs = "ds_list_out=ds_list_out";
	var args = "INSRT_USER_ID="+regUser+" PRE_RCPT_NO="+preNo+" PRE_RCPT_SEQ="+preSeq+"";
	var callBackid = "fn_afterSave";
		
	this.gfn_transaction( id, url, inDs, outDs, args, callBackid);
};

// 저장 callback
this.fn_afterSave = function (strSvcID, nErrorCode, strErrorMag) {
	if (nErrorCode < 0) 
	{
		this.alert(strErrorMag)
		return ;
	}
	
	if (this.gfn_isNull(this.ds_list_2.getColumn(0,"ESTN_NO")))
	{
		// 안심견적 1 상품내역
		this.ds_list_2.set_updatecontrol(false);
		
		for(var i=0; i<this.ds_list_2.rowcount;i++)
		{
			this.ds_list_2.setRowType(i,Dataset.ROWTYPE_INSERT);
		} 
		
		this.ds_list_2.set_updatecontrol(true);
	}
	
	if (this.gfn_isNull(this.ds_list_3.getColumn(0,"ESTN_NO")))
	{
		// 안심견적 1 상품내역
		this.ds_list_3.set_updatecontrol(false);
		
		for(var i=0; i<this.ds_list_3.rowcount;i++)
		{
			this.ds_list_3.setRowType(i,Dataset.ROWTYPE_INSERT);
		} 
		
		this.ds_list_3.set_updatecontrol(true);
	}
	
	var regUser = this.objApp.gds_login_info.getColumn(0,"USR_ID");
	var mgNo = this.ds_list_out.getColumn(0,"ESTN_NO");
	if (this.gfn_isNull(mgNo))
	{
		mgNo = this.ds_list_1.getColumn(this.ds_list_1.rowposition,"ESTN_NO");
	}	
	
	var id = "FM004_M02";
	var url = "svcUrl::FM004_M02";
	var inDs = "ds_list_2=ds_list_2:U ds_list_3=ds_list_3:U";
	var outDs = "ds_list_out=ds_list_out";
	var args = "INSRT_USER_ID="+regUser+" ESTN_NO="+mgNo+"";
	var callBackid = "fn_afterSave2";
		
	this.gfn_transaction( id, url, inDs, outDs, args, callBackid);
	
};

this.fn_afterSave2 = function (strSvcID, nErrorCode, strErrorMag) {
	if (nErrorCode < 0) 
	{
		this.alert(strErrorMag)
		return ;
	}
	
	var preNo = this.ds_list_1.getColumn(this.ds_list_1.rowposition,"PRE_RCPT_NO");
	var seq = this.ds_list_1.getColumn(this.ds_list_1.rowposition,"SEQ");

	this.alert("저장 되었습니다.");
	this.fn_search(preNo, seq);
};

// 멀티 콤보
this.fn_mComboCallback = function ()
{
	if (!this.gfn_isNull(this.ds_list_3.getColumn(0,"ESTN_NO")))
	{
		if (this.confirm("저장된 데이터가 삭제되고 다시 조회됩니다. 계속 하시겠습니까?"))
		{
			this.ds_list_3.deleteAll();
			
			var regUser = this.objApp.gds_login_info.getColumn(0,"USR_ID");
			var mgNo = this.ds_list_3.getColumn(0,"ESTN_NO");
			
			var id = "FM004_M02";
			var url = "svcUrl::FM004_M02";
			var inDs = "ds_list_2=ds_list_2:U ds_list_3=ds_list_3:U";
			var outDs = "ds_list_out=ds_list_out";
			var args = "INSRT_USER_ID="+regUser+" ESTN_NO="+mgNo+"";
			var callBackid = "fn_afterdelete3";
				
			this.gfn_transaction( id, url, inDs, outDs, args, callBackid);
		} else
		{
			return;
		}
	}
	
	var val = this.Tab00.Tabpage1.form.Div00.form.div_mCombo8.form.get_value();
	this.ds_cond.setColumn(this.ds_cond.rowposition,"FA_ITEM",val);
	
	this.fn_search4();
};

this.fn_afterdelete3 = function (strSvcID, nErrorCode, strErrorMag) {
	if (nErrorCode < 0) 
	{
		this.alert(strErrorMag)
		return ;
	}
	
	var val = this.Tab00.Tabpage1.form.Div00.form.div_mCombo8.form.get_value();
	this.ds_cond.setColumn(this.ds_cond.rowposition,"FA_ITEM",val);
	
	this.fn_search4();
}

// 사전상담 조회 팝업
this.Div00_btn_preno1_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{	
	var sPopupId  = "preInfo_popup";
    var sUrl      = "FM::FM004_P01.xfdl";
	var oArg      = {};
	var sCallBack = "fn_popupCallback_preInInfo";
    var oOption   = {title : "사전상담 정보"};
	this.gfn_openPopup(sPopupId, sUrl, oArg, sCallBack, oOption);
};

// 사전상담 팝업 callback
this.fn_popupCallback_preInInfo = function(sPopId, sRtn)
{	
	var objRtn = sRtn.split(",")	
	
	this.fn_search(objRtn[0], objRtn[1]);
};

// 장례식장 팝업
this.Div06_btn_sono00_00_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	// 제물비 멀티콤보 초기화
	this.ds_cond.setColumn(this.ds_cond.rowposition,"PLACE_NM","");
	this.Tab00.Tabpage1.form.Div00.form.div_mCombo8.form.set_value("");
	this.ds_cond.setColumn(this.ds_cond.rowposition,"FA_ITEM","");
	
	var sPopupId  = "dlvy_popup";
    var sUrl      = "ES::ES001_P01.xfdl";
	var oArg      = {};
	var sCallBack = "fn_popupCallback_dlvy";
    var oOption   = {title : "장례식장 정보"};
	this.gfn_openPopup(sPopupId, sUrl, oArg, sCallBack, oOption);
};

// 장례식장 팝업 callback
this.fn_popupCallback_dlvy = function(sPopId, sRtn)
{
    var objRtn = JSON.parse(sRtn);
	
	var fnNo = objRtn.FN_NO;

	this.ds_cond.setColumn(this.ds_cond.rowposition,"FN_NO",objRtn.FN_NO);
	this.ds_cond.setColumn(this.ds_cond.rowposition,"FACL_NM",objRtn.FACL_NM);
	this.fn_search2(fnNo);
};

// 빈소사용료, 제물비 조회
this.fn_search2 = function (fnNo)
{
	var id = "FM004_P02_S";
	var url = "svcUrl::FM004_P02_S";
	var inDs = "";
	var outDs = "ds_fa_item=ds_list_2 ds_place=ds_list_3";
	var args = "FN_NO="+fnNo+"";
	var callBackid = "fn_afterSearch2";
		
	this.gfn_transaction( id, url, inDs, outDs, args, callBackid);
};

// 조회 callback
this.fn_afterSearch2 = function (strSvcID, nErrorCode, strErrorMag) {
	if (nErrorCode < 0) 
	{
		this.alert(strErrorMag)
		return ;
	}

	this.Tab00.Tabpage1.form.Div00.form.div_mCombo8.form.fn_setDataset(this.ds_fa_item);
};

// 빈소사용료 조회 팝업
this.Div00_btn_preno_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{	
	var fnNo = this.ds_cond.getColumn(this.ds_cond.rowposition,"FN_NO");
	
	if (this.gfn_isNull(fnNo))
	{
		this.alert("장례식장을 먼저 선택해 주세요")
		return;
	}
	
	if (!this.gfn_isNull(this.ds_list_3.getColumn(0,"ESTN_NO")))
	{
		if (this.confirm("저장된 데이터가 삭제되고 다시 조회됩니다. 계속 하시겠습니까?"))
		{
			this.ds_list_3.deleteAll();
			
			var regUser = this.objApp.gds_login_info.getColumn(0,"USR_ID");
			var mgNo = this.ds_list_3.getColumn(0,"ESTN_NO");
			
			var id = "FM004_M02";
			var url = "svcUrl::FM004_M02";
			var inDs = "ds_list_2=ds_list_2:U ds_list_3=ds_list_3:U";
			var outDs = "ds_list_out=ds_list_out";
			var args = "INSRT_USER_ID="+regUser+" ESTN_NO="+mgNo+"";
			var callBackid = "fn_afterdelete5";
				
			this.gfn_transaction( id, url, inDs, outDs, args, callBackid);
		} else
		{
			return;
		}
	} else
	{
		var fnNo = this.ds_cond.getColumn(this.ds_cond.rowposition,"FN_NO");
	
		var sPopupId  = "placeInfo_popup";
		var sUrl      = "FM::FM004_P02.xfdl";
		var oArg      = {fnNo : fnNo};
		var sCallBack = "fn_popupCallback_placeInInfo";
		var oOption   = {title : "빈소사용료 정보"};
		this.gfn_openPopup(sPopupId, sUrl, oArg, sCallBack, oOption);
	}
};

this.fn_afterdelete5 = function (strSvcID, nErrorCode, strErrorMag) {
	if (nErrorCode < 0) 
	{
		this.alert(strErrorMag)
		return ;
	}
	
	var fnNo = this.ds_cond.getColumn(this.ds_cond.rowposition,"FN_NO");
	
	var sPopupId  = "placeInfo_popup";
    var sUrl      = "FM::FM004_P02.xfdl";
	var oArg      = {fnNo : fnNo};
	var sCallBack = "fn_popupCallback_placeInInfo";
    var oOption   = {title : "빈소사용료 정보"};
	this.gfn_openPopup(sPopupId, sUrl, oArg, sCallBack, oOption);
}

// 빈소사용료 팝업 callback
this.fn_popupCallback_placeInInfo = function(sPopId, sRtn)
{	
	var objRtn = JSON.parse(sRtn);
	
	this.ds_cond.setColumn(this.ds_cond.rowposition,"PLACE_NM",this.gfn_isNullRtn(objRtn.FN_SEQ,""));
	
	this.fn_search4();
};

// 화장장 조회 팝업
this.Tab00_Tabpage1_Div00_btn_preno00_00_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	if (!this.gfn_isNull(this.ds_list_3.getColumn(0,"ESTN_NO")))
	{
		if (this.confirm("저장된 데이터가 삭제되고 다시 조회됩니다. 계속 하시겠습니까?"))
		{
			this.ds_list_3.deleteAll();
			
			var regUser = this.objApp.gds_login_info.getColumn(0,"USR_ID");
			var mgNo = this.ds_list_3.getColumn(0,"ESTN_NO");
			
			var id = "FM004_M02";
			var url = "svcUrl::FM004_M02";
			var inDs = "ds_list_2=ds_list_2:U ds_list_3=ds_list_3:U";
			var outDs = "ds_list_out=ds_list_out";
			var args = "INSRT_USER_ID="+regUser+" ESTN_NO="+mgNo+"";
			var callBackid = "fn_afterdelete4";
				
			this.gfn_transaction( id, url, inDs, outDs, args, callBackid);
		} else
		{
			return;
		}
	} else 
	{
		var sPopupId  = "cremInfo_popup";
		var sUrl      = "FM::FM004_P03.xfdl";
		var oArg      = {};
		var sCallBack = "fn_popupCallback_cremInInfo";
		var oOption   = {title : "화장장 정보"};
		this.gfn_openPopup(sPopupId, sUrl, oArg, sCallBack, oOption);
	}
};

this.fn_afterdelete4 = function (strSvcID, nErrorCode, strErrorMag) {
	if (nErrorCode < 0) 
	{
		this.alert(strErrorMag)
		return ;
	}
	
	var sPopupId  = "cremInfo_popup";
    var sUrl      = "FM::FM004_P03.xfdl";
	var oArg      = {};
	var sCallBack = "fn_popupCallback_cremInInfo";
    var oOption   = {title : "화장장 정보"};
	this.gfn_openPopup(sPopupId, sUrl, oArg, sCallBack, oOption);
}

// 화장장 팝업 callback
this.fn_popupCallback_cremInInfo = function(sPopId, sRtn)
{			
	var objRtn = JSON.parse(sRtn);
	
	this.ds_cond.setColumn(this.ds_cond.rowposition,"CREM_NM",this.gfn_isNullRtn(objRtn.CREM_NM,""));
	this.ds_cond.setColumn(this.ds_cond.rowposition,"CREM_NO",this.gfn_isNullRtn(objRtn.CREM_NO,""));
	this.ds_cond.setColumn(this.ds_cond.rowposition,"ZONE_SEQ",objRtn.ZONE_SEQ);
	this.ds_cond.setColumn(this.ds_cond.rowposition,"HUMAN_SEQ",objRtn.HUMAN_SEQ);

	this.fn_search4();
};

// 장지 팝업 조회
this.Tab00_Tabpage1_Div00_btn_preno00_00_00_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	if (!this.gfn_isNull(this.ds_list_3.getColumn(0,"ESTN_NO")))
	{
		if (this.confirm("저장된 데이터가 삭제되고 다시 조회됩니다. 계속 하시겠습니까?"))
		{
			this.ds_list_3.deleteAll();
			
			var regUser = this.objApp.gds_login_info.getColumn(0,"USR_ID");
			var mgNo = this.ds_list_3.getColumn(0,"ESTN_NO");
			
			var id = "FM004_M02";
			var url = "svcUrl::FM004_M02";
			var inDs = "ds_list_2=ds_list_2:U ds_list_3=ds_list_3:U";
			var outDs = "ds_list_out=ds_list_out";
			var args = "INSRT_USER_ID="+regUser+" ESTN_NO="+mgNo+"";
			var callBackid = "fn_afterdelete5";
				
			this.gfn_transaction( id, url, inDs, outDs, args, callBackid);
		} else
		{
			return;
		}
	} else 
	{
		var sPopupId  = "brlInfo_popup";
		var sUrl      = "FM::FM004_P04.xfdl";
		var oArg      = {};
		var sCallBack = "fn_popupCallback_brlInInfo";
		var oOption   = {title : "장지 정보"};
		this.gfn_openPopup(sPopupId, sUrl, oArg, sCallBack, oOption);
	}
};

this.fn_afterdelete5 = function (strSvcID, nErrorCode, strErrorMag) {
	if (nErrorCode < 0) 
	{
		this.alert(strErrorMag)
		return ;
	}
	
	var sPopupId  = "brlInfo_popup";
    var sUrl      = "FM::FM004_P04.xfdl";
	var oArg      = {};
	var sCallBack = "fn_popupCallback_brlInInfo";
    var oOption   = {title : "장지 정보"};
	this.gfn_openPopup(sPopupId, sUrl, oArg, sCallBack, oOption);
}

// 장지 팝업 callback
this.fn_popupCallback_brlInInfo = function(sPopId, sRtn)
{	
	var objRtn = JSON.parse(sRtn);

	this.ds_cond.setColumn(this.ds_cond.rowposition,"BRL_NO",this.gfn_isNullRtn(objRtn.BRL_NO,""));
	this.ds_cond.setColumn(this.ds_cond.rowposition,"BRL_SEQ",this.gfn_isNullRtn(objRtn.BRL_SEQ,""));
	this.ds_cond.setColumn(this.ds_cond.rowposition,"BRL_NM",this.gfn_isNullRtn(objRtn.BRL_NM,""));
	this.ds_cond.setColumn(this.ds_cond.rowposition,"DIV2",this.gfn_isNullRtn(objRtn.DIV2,""));
	
	this.fn_search4();
};

// 견적 조회(상품)
this.fn_search3 = function ()
{
	var Arg_1 = this.ds_cond.getColumn(this.ds_cond.rowposition,"ITEM");

	var id = "FM004_S02";
	var url = "svcUrl::FM004_S02";
	var inDs = "";
	var outDs = "ds_list_2=ds_list_2";
	var args = "GOODS_NO="+Arg_1+"";
	var callBackid = "fn_afterSearch3";
		
	this.gfn_transaction( id, url, inDs, outDs, args, callBackid);
};

this.fn_afterSearch3 = function (strSvcID, nErrorCode, strErrorMag) {
	if (nErrorCode < 0) 
	{
		this.alert(strErrorMag)
		return ;
	}
	
	this.fn_sumEvent();
};

// 견적 조회(장지)
this.fn_search4 = function ()
{	

	var Arg_1 = this.ds_cond.getColumn(this.ds_cond.rowposition,"FN_NO");										// 장례식장 관리번호
 	var Arg_2 = this.gfn_nvl(this.ds_cond.getColumn(this.ds_cond.rowposition,"PLACE_NM"),0);                   // 빈소 순번
	var Arg_3 = this.ds_cond.getColumn(this.ds_cond.rowposition,"FA_ITEM");                    				// 제물비
	var Arg_4 = this.ds_cond.getColumn(this.ds_cond.rowposition,"CREM_NO");                    				// 화장장 관리번호
	var Arg_5 = this.gfn_nvl(this.ds_cond.getColumn(this.ds_cond.rowposition,"ZONE_SEQ"),0);                   // 지역 순번
	var Arg_6 = this.gfn_nvl(this.ds_cond.getColumn(this.ds_cond.rowposition,"HUMAN_SEQ"),0);                  // 대인/소인 순번
	var Arg_7 = this.ds_cond.getColumn(this.ds_cond.rowposition,"BRL_NO");                     				// 장지 관리번호
	var Arg_8 = this.gfn_nvl(this.ds_cond.getColumn(this.ds_cond.rowposition,"BRL_SEQ"),0);                    // 장지 순번

	var id = "FM004_S03";
	var url = "svcUrl::FM004_S03";
	var inDs = "";
	var outDs = "ds_list_3=ds_list_3";
	var args = "FN_NO="+Arg_1+" FN_SEQ="+Arg_2+" FA_ITEM="+Arg_3+" CREM_NO="+Arg_4+" ZONE_SEQ="+Arg_5+" HUMAN_SEQ="+Arg_6+" BRL_NO="+Arg_7+" BRL_SEQ="+Arg_8+"";
	var callBackid = "fn_afterSearch4";
		
	this.gfn_transaction( id, url, inDs, outDs, args, callBackid);
};

this.fn_afterSearch4 = function (strSvcID, nErrorCode, strErrorMag) {
	if (nErrorCode < 0) 
	{
		this.alert(strErrorMag)
		return ;
	}
	
	// 장례식장 금액
// 	this.ds_list_3.filter("DIV=='장례식장'");
// 	this.Tab00.Tabpage1.form.Div02.form.S_F_COST.set_text(this.gfn_appendComma(this.ds_list_3.getSum("TOTAL_PRICE")));
// 	this.ds_list_3.filter("");
// 	
// 	var item_cost = this.Tab00.Tabpage1.form.Div02.form.S_ITEM_COST.text;
// 	var fa_cost = this.Tab00.Tabpage1.form.Div02.form.S_F_COST.text;
// 	if (this.gfn_isNull(item_cost))
// 	{
// 		this.Tab00.Tabpage1.form.Div02.form.S_TOT_COST.set_text(this.gfn_appendComma(parseInt(this.gfn_removeComma(fa_cost))));
// 	} else if(this.gfn_isNull(fa_cost))
// 	{
// 		this.Tab00.Tabpage1.form.Div02.form.S_TOT_COST.set_text(parseInt(this.gfn_appendComma(this.gfn_removeComma(item_cost))));
// 	} else
// 	{
// 		this.Tab00.Tabpage1.form.Div02.form.S_TOT_COST.set_text(this.gfn_appendComma(parseInt(this.gfn_removeComma(item_cost))+parseInt(this.gfn_removeComma(fa_cost))));
// 	}
	this.fn_sumEvent();
};

// 상품 아이템 체인지 이벤트
this.Tab00_Tabpage1_Div00_cmb_item_onitemchanged = function(obj:nexacro.Combo,e:nexacro.ItemChangeEventInfo)
{
	this.fn_search3();
};

// 상품 아이템 체인지 이벤트
this.Tab00_Tabpage1_Div00_cmb_item_onitemchanged = function(obj:nexacro.Combo,e:nexacro.ItemChangeEventInfo)
{	
	if (!this.gfn_isNull(this.ds_list_2.getColumn(0,"ESTN_NO")))
	{
		if (this.confirm("저장된 데이터가 삭제되고 다시 조회됩니다. 계속 하시겠습니까?"))
		{
			this.ds_list_2.deleteAll();
			
			var regUser = this.objApp.gds_login_info.getColumn(0,"USR_ID");
			var mgNo = this.ds_list_2.getColumn(0,"ESTN_NO");
			
			var id = "FM004_M02";
			var url = "svcUrl::FM004_M02";
			var inDs = "ds_list_2=ds_list_2:U ds_list_3=ds_list_3:U";
			var outDs = "ds_list_out=ds_list_out";
			var args = "INSRT_USER_ID="+regUser+" ESTN_NO="+mgNo+"";
			var callBackid = "fn_afterdelete1";
				
			this.gfn_transaction( id, url, inDs, outDs, args, callBackid);
		} else
		{
			this.ds_cond.setColumn(this.ds_cond.rowposition,"ITEM",e.prevalue);
			return;
		}
	}
	
	this.Tab00.Tabpage1.form.Div02.form.S_item.set_text(this.Tab00.Tabpage1.form.Div00.form.cmb_item.text);
	this.fn_search3();
};

this.fn_afterdelete1 = function (strSvcID, nErrorCode, strErrorMag) {
	if (nErrorCode < 0) 
	{
		this.alert(strErrorMag)
		return ;
	}
	
	this.Tab00.Tabpage1.form.Div02.form.S_item.set_text(this.Tab00.Tabpage1.form.Div00.form.cmb_item.text);
	this.fn_search3();
}

this.Tab00_Tabpage1_Div00_cmb_age00_onitemchanged = function(obj:nexacro.Combo,e:nexacro.ItemChangeEventInfo)
{
	if (!this.gfn_isNull(this.ds_list_3.getColumn(0,"ESTN_NO")))
	{
		if (this.confirm("저장된 데이터가 삭제되고 다시 조회됩니다. 계속 하시겠습니까?"))
		{
			this.ds_list_3.deleteAll();
			
			var regUser = this.objApp.gds_login_info.getColumn(0,"USR_ID");
			var mgNo = this.ds_list_3.getColumn(0,"ESTN_NO");
			
			var id = "FM004_M02";
			var url = "svcUrl::FM004_M02";
			var inDs = "ds_list_2=ds_list_2:U ds_list_3=ds_list_3:U";
			var outDs = "ds_list_out=ds_list_out";
			var args = "INSRT_USER_ID="+regUser+" ESTN_NO="+mgNo+"";
			var callBackid = "fn_afterdelete2";
				
			this.gfn_transaction( id, url, inDs, outDs, args, callBackid);
		} else
		{
			this.ds_cond.setColumn(this.ds_cond.rowposition,"PLACE_NM",e.prevalue);
			return;
		}
	}
	
	this.fn_search4();
};

this.fn_afterdelete2 = function (strSvcID, nErrorCode, strErrorMag) {
	if (nErrorCode < 0) 
	{
		this.alert(strErrorMag)
		return ;
	}
	
	this.fn_search4();
}

// 품목 추가
this.Tab00_Tabpage1_btn_add_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	this.ds_list_2.addRow();
	this.ds_list_2.setColumn(this.ds_list_2.rowposition,"ADD_DEL_YN","추가");
};

// 품목 삭제(공제처리)
this.Div00_btn_del_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	if (this.ds_list_2.getColumn(this.ds_list_2.rowposition,"ADD_DEL_YN") == "추가")
	{
		this.ds_list_2.deleteRow(this.ds_list_2.rowposition);
	} else
	{
		if (this.gfn_isNull(this.ds_list_2.getColumn(this.ds_list_2.rowposition,"DDT_FLG")))
		{
			this.alert("공제 해당 품목이 아닙니다.")
			return;
		}
		this.ds_list_2.setColumn(this.ds_list_2.rowposition,"ADD_DEL_YN","공제");
	}
};

// 품목 표준 처리
this.Tab00_Tabpage1_Div01_btn_del00_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	if (this.ds_list_2.getColumn(this.ds_list_2.rowposition,"ADD_DEL_YN") == "공제")
	{
		this.ds_list_2.setColumn(this.ds_list_2.rowposition,"ADD_DEL_YN","표준");
	}
};

// 품목 찾기 그리드 이벤트
this.Grid01_00_oncellclick = function(obj:nexacro.Grid,e:nexacro.GridClickEventInfo)
{
	if (e.col == 2 && this.ds_list_2.getColumn(e.row,"ADD_DEL_YN") == "추가")
	{
		var sPopupId  = "itemInfo_popup";
		var sUrl      = "FM::FM004_P05.xfdl";
		var oArg      = {};
		var sCallBack = "fn_popupCallback_itemInInfo";
		var oOption   = {title : "품목 정보"};
		this.gfn_openPopup(sPopupId, sUrl, oArg, sCallBack, oOption);
	}
};

// 화장장 팝업 callback
this.fn_popupCallback_itemInInfo = function(sPopId, sRtn)
{	
	var objRtn = JSON.parse(sRtn);

	this.ds_list_2.setColumn(this.ds_list_2.rowposition,"ITEM_CD",this.gfn_isNullRtn(objRtn.ITEM_CD,""));
	this.ds_list_2.setColumn(this.ds_list_2.rowposition,"ITEM_NM",this.gfn_isNullRtn(objRtn.ITEM_NM,""));
	this.ds_list_2.setColumn(this.ds_list_2.rowposition,"QTY","1");
	this.ds_list_2.setColumn(this.ds_list_2.rowposition,"PRICE",this.gfn_isNullRtn(objRtn.SELL_PRICE,""));
	this.ds_list_2.setColumn(this.ds_list_2.rowposition,"TOTAL_PRICE",this.gfn_isNullRtn(objRtn.SELL_PRICE,""));
	
	this.fn_sumEvent();
};

// 상품 내역 체인지 이벤트
this.ds_list_2_oncolumnchanged = function(obj:nexacro.NormalDataset,e:nexacro.DSColChangeEventInfo)
{	
	if (this.ds_list_2.getColumn(e.row,"ADD_DEL_YN") != "추가")
	{
		if (e.columnid == "TOTAL_PRICE" || e.columnid == "ADD_DEL_YN" || e.columnid == "QTY")
		{
			var totPrice = this.ds_list_2.getColumn(this.ds_list_2.rowposition,"QTY")*this.ds_list_2.getColumn(this.ds_list_2.rowposition,"PRICE")
			this.ds_list_2.setColumn(this.ds_list_2.rowposition,"TOTAL_PRICE",totPrice);
			
			this.fn_sumEvent();
		}	
	}
};

// 장지 체인지 이벤트
this.ds_list_3_oncolumnchanged = function(obj:nexacro.NormalDataset,e:nexacro.DSColChangeEventInfo)
{	
	if (e.columnid == "TOTAL_PRICE" || e.columnid == "QTY")
	{		
		var totPrice = this.ds_list_3.getColumn(this.ds_list_3.rowposition,"QTY")*this.ds_list_3.getColumn(this.ds_list_3.rowposition,"PRICE")
		this.ds_list_3.setColumn(this.ds_list_3.rowposition,"TOTAL_PRICE",totPrice);
		
// 		this.Tab00.Tabpage1.form.Div02.form.S_F_COST.set_text(this.gfn_appendComma(this.ds_list_3.getSum("TOTAL_PRICE")));
// 		
// 		var item_cost = this.Tab00.Tabpage1.form.Div02.form.S_ITEM_COST.text;
// 		var fa_cost = this.Tab00.Tabpage1.form.Div02.form.S_F_COST.text;
// 		if (this.gfn_isNull(item_cost))
// 		{
// 			this.Tab00.Tabpage1.form.Div02.form.S_TOT_COST.set_text(this.gfn_appendComma(parseInt(this.gfn_removeComma(fa_cost))));
// 		} else if(this.gfn_isNull(fa_cost))
// 		{
// 			this.Tab00.Tabpage1.form.Div02.form.S_TOT_COST.set_text(this.gfn_appendComma(parseInt(this.gfn_removeComma(item_cost))));
// 		} else
// 		{
// 			this.Tab00.Tabpage1.form.Div02.form.S_TOT_COST.set_text(this.gfn_appendComma(parseInt(this.gfn_removeComma(item_cost))+parseInt(this.gfn_removeComma(fa_cost))));
// 		}
		this.fn_sumEvent();
	}	
};

// 표준인 것만 합계 금액 내기
this.fn_sumPrice = function ()
{
	var sumPrice = 0;
	for (var i=0; i< this.ds_list_2.rowcount; i++)
	{
		if (this.ds_list_2.getColumn(i,"ADD_DEL_YN") != "공제")
		{
			sumPrice += (parseInt(this.ds_list_2.getColumn(i,"TOTAL_PRICE")))
		}
	}	
	return sumPrice;
};

// 필수 체크
this.fn_valChk = function ()
{	
	if (this.gfn_isNull(this.ds_list_1.getColumn(this.ds_list_1.rowposition,"PRE_RCPT_NO")))
	{
		this.alert("사전상담번호가 없습니다. 사전상담을 불러오시기 바랍니다.");
		return false;
	}
};

// 문자발송
this.Tab00_Tabpage1_btn_mms_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	if (this.gfn_isNull(this.ds_list_1.getColumn(this.ds_list_1.rowposition,"ESTN_NO")))
	{
		this.alert("견적 내용을 등록하시기 바랍니다.");
		return;
	}
	
	var mgNo = this.ds_list_1.getColumn(this.ds_list_1.rowposition,"ESTN_NO");
	var hp = this.ds_list_1.getColumn(this.ds_list_1.rowposition,"CUST_TEL");
	var nm = this.ds_list_1.getColumn(this.ds_list_1.rowposition,"CUST_NM");
	var message = "";
	message += "영원히 기억될 깊은 잠\n"
	message += "작은 장례식 꽃잠\n\n"
	message += "고객님이 상담하신 견적정보는 아래 링크를 통해 확인가능하십니다.\n\n"
	message += "http://m.hyunjinsn.com/KO843_mobile/corporate/Test/estn.html"
	
	var prgmId = "FM004";
	var sndNum = "16000113";
	
	var sPopupId  = "mms_popup";
    var sUrl      = "FM::FM001_P02.xfdl";
	var oArg      = {mgNo : mgNo, hp : hp, nm : nm, message : message, prgmId : prgmId, sndNum : sndNum};
	var sCallBack = "fn_popupCallback_mms";
    var oOption   = {title : "MMS 전송"};
	this.gfn_openPopup(sPopupId, sUrl, oArg, sCallBack, oOption);
};

// 문자 발송 조회
this.Tab00_Tabpage1_btn_mms00_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	var mgNo = this.ds_list_1.getColumn(this.ds_list_1.rowposition,"ESTN_NO");
	
	var sPopupId  = "mmsSearch_popup";
    var sUrl      = "FM::FM001_P04.xfdl";
	var oArg      = {mgNo : mgNo};
	var sCallBack = "";
    var oOption   = {title : "MMS 발송내역 조회"};
	this.gfn_openPopup(sPopupId, sUrl, oArg, sCallBack, oOption);
};

this.fn_sumEvent = function ()
{
	// 서비스 금액
	this.ds_list_2.filter("ADD_DEL_YN=='표준' || ADD_DEL_YN=='추가'");
	this.Tab00.Tabpage1.form.Div02.form.S_ITEM_COST.set_text(this.gfn_appendComma(this.ds_list_2.getSum("TOTAL_PRICE")));
	this.ds_list_2.filter("");
	
	// 공제 금액
	this.ds_list_2.filter("ADD_DEL_YN=='공제'");
	this.Tab00.Tabpage1.form.Div02.form.S_ITEM_DEL.set_text(this.gfn_appendComma(this.ds_list_2.getSum("TOTAL_PRICE")));
	this.ds_list_2.filter("");
	
	// 추가 금액
	this.ds_list_2.filter("ADD_DEL_YN=='추가'");
	this.Tab00.Tabpage1.form.Div02.form.S_ITEM_ADD.set_text(this.gfn_appendComma(this.ds_list_2.getSum("TOTAL_PRICE")));
	this.ds_list_2.filter("");
	
	// 서비스명
	this.Tab00.Tabpage1.form.Div02.form.S_item.set_text(this.Tab00.Tabpage1.form.Div00.form.cmb_item.text);
	
	
	// 장례식장 비용
	this.ds_list_3.filter("DIV=='장례식장'");
	this.Tab00.Tabpage1.form.Div02.form.S_F_COST.set_text(this.gfn_appendComma(this.ds_list_3.getSum("TOTAL_PRICE")));
	this.ds_list_3.filter("");
	
	// 장례식장 비용
	this.ds_list_3.filter("DIV=='화장장'");
	this.Tab00.Tabpage1.form.Div02.form.S_C_COST.set_text(this.gfn_appendComma(this.ds_list_3.getSum("TOTAL_PRICE")));
	this.ds_list_3.filter("");
	
	// 장례식장 비용
	this.ds_list_3.filter("DIV=='장지'");
	this.Tab00.Tabpage1.form.Div02.form.S_B_COST.set_text(this.gfn_appendComma(this.ds_list_3.getSum("TOTAL_PRICE")));
	this.ds_list_3.filter("");
	
	var item_cost = this.Tab00.Tabpage1.form.Div02.form.S_ITEM_COST.text;
	var fa_cost = this.gfn_appendComma(this.ds_list_3.getSum("TOTAL_PRICE"));

	if (this.gfn_isNull(item_cost))
	{
		this.Tab00.Tabpage1.form.Div02.form.S_TOT_COST.set_text(this.gfn_appendComma(parseInt(this.gfn_removeComma(fa_cost))));
	} else if(this.gfn_isNull(fa_cost))
	{
		this.Tab00.Tabpage1.form.Div02.form.S_TOT_COST.set_text(this.gfn_appendComma(parseInt(this.gfn_removeComma(item_cost))));
	} else
	{
		this.Tab00.Tabpage1.form.Div02.form.S_TOT_COST.set_text(this.gfn_appendComma(parseInt(this.gfn_removeComma(item_cost))+parseInt(this.gfn_removeComma(fa_cost))));
	}
};
]]></Script>
  </Form>
</FDL>
